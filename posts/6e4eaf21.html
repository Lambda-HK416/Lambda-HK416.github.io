<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³• | LambdağŸƒ</title><meta name="keywords" content="æ•™ç¨‹,Linux,Docker"><meta name="author" content="Lambda"><meta name="copyright" content="Lambda"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="æœ¬æ–‡è®°å½•äº†åšä¸»ç›®å‰ç”¨Dockeréƒ¨ç½²è¿‡çš„å…¨éƒ¨å†…å®¹"><meta property="og:type" content="article"><meta property="og:title" content="Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•"><meta property="og:url" content="https://www.wikunkun.asia/posts/6e4eaf21.html"><meta property="og:site_name" content="LambdağŸƒ"><meta property="og:description" content="æœ¬æ–‡è®°å½•äº†åšä¸»ç›®å‰ç”¨Dockeréƒ¨ç½²è¿‡çš„å…¨éƒ¨å†…å®¹"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://lambda-image-1.pages.dev/wallhaven-d6r2qo.jpg"><meta property="article:published_time" content="2024-11-26T10:19:03.000Z"><meta property="article:modified_time" content="2024-11-23T14:00:00.000Z"><meta property="article:author" content="Lambda"><meta property="article:tag" content="æ•™ç¨‹"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Docker"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://lambda-image-1.pages.dev/wallhaven-d6r2qo.jpg"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://www.wikunkun.asia/posts/6e4eaf21"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:void 0,noticeOutdate:{limitDay:30,position:"top",messagePrev:"è·ä¸Šæ¬¡æ›´æ–°æ—¶é—´å·²ç»è¿‡äº†",messageNext:"å¤©ï¼Œæ–‡ç« å†…å®¹å¯èƒ½å·²è¿‡æ—¶ã€‚"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:230},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js",css:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-11-23 22:00:00"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><script src="https://npm.elemecdn.com/echarts@4.9.0/map/js/china.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/todolist/todolist.css"><link rel="stylesheet" href="/css/contact-info/contact-info.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute;overflow:hidden;width:0;height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248 626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="LambdağŸƒ" type="application/atom+xml"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/avatar.jpg" onerror='onerror=null,src="/assets/r1.jpg"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å·¥å…·ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/todolist/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shengdanqiu"></use></svg> <span class="menu_word" style="font-size:17px">è®¡åˆ’</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-wangye"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--tongjibiao"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shujutongji1"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xianxingshalou"></use></svg> <span class="menu_word" style="font-size:17px">æ—§æ—¶å…‰</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">LambdağŸƒ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å·¥å…·ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/todolist/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shengdanqiu"></use></svg> <span class="menu_word" style="font-size:17px">è®¡åˆ’</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-wangye"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--tongjibiao"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shujutongji1"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xianxingshalou"></use></svg> <span class="menu_word" style="font-size:17px">æ—§æ—¶å…‰</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg> <span>æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº</span> <time class="post-meta-date-created" datetime="2024-11-26T10:19:03.000Z" title="å‘è¡¨äº 2024-11-26 18:19:03">2024-11-26</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-11-23T14:00:00.000Z" title="æ›´æ–°äº 2024-11-23 22:00:00">2024-11-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">åç«¯</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.3w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>61åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="MySqlçš„éƒ¨ç½²æ–¹æ³•">MySqlçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ">å‰ç½®å·¥ä½œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/mysql/logs/bin/      </span><br><span class="line">mkdir -p /mydata/mysql/logs/error/</span><br><span class="line">mkdir -p /mydata/mysql/logs/general/</span><br><span class="line">mkdir -p /mydata/mysql/conf/                        #æ–°å»ºconfç›®å½•</span><br><span class="line">mkdir -p /mydata/mysql/data/                        #æ–°å»ºdataç›®å½•</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>logs</code>ç›®å½•çš„æƒé™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R <span class="number">777</span> <span class="regexp">/mydata/my</span>sql<span class="regexp">/logs/</span>;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶<code>vim /mydata/mysql/conf/my.cnf</code></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"># =======å¿˜è®°rootå¯†ç çš„æ—¶å€™æ·»åŠ è¿™ä¸‰è¡Œ======</span><br><span class="line">#skip-host-cache</span><br><span class="line">#skip-name-resolve</span><br><span class="line">#skip-grant-tables</span><br><span class="line"># =========================================</span><br><span class="line"></span><br><span class="line">default-storage-engine=INNODB  # åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span><br><span class="line">character-set-server=utf8mb4      # è®¾ç½®mysqlæœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›†</span><br><span class="line">pid-file        = /var/run/mysqld/mysqld.pid  # pidæ–‡ä»¶æ‰€åœ¨ç›®å½•</span><br><span class="line">socket          = /var/run/mysqld/mysqld.sock # ç”¨äºæœ¬åœ°è¿æ¥çš„socketå¥—æ¥å­—</span><br><span class="line">datadir         = /var/lib/mysql              # æ•°æ®æ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span><br><span class="line">symbolic-links=<span class="number">0</span></span><br><span class="line">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION # å®šä¹‰mysqlåº”è¯¥æ”¯æŒçš„sqlè¯­æ³•ï¼Œæ•°æ®æ ¡éªŒç­‰!</span><br><span class="line"></span><br><span class="line"># å…è®¸æœ€å¤§è¿æ¥æ•°</span><br><span class="line">max_connections=<span class="number">200</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åŒä¸€å±€åŸŸç½‘å†…æ³¨æ„è¦å”¯ä¸€</span><br><span class="line">server-id=<span class="number">3306</span></span><br><span class="line"># å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ &amp; æ—¥å¿—ä½ç½®å­˜æ”¾ä½ç½®`/var/lib/mysql`</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">log-bin=/var/log/mysql/bin/mysql-bin</span><br><span class="line"></span><br><span class="line"># binlogæ ¼å¼</span><br><span class="line"># <span class="number">1.</span> STATEMENTï¼šåŸºäºSQLè¯­å¥çš„æ¨¡å¼ï¼Œbinlog æ•°æ®é‡å°ï¼Œä½†æ˜¯æŸäº›è¯­å¥å’Œå‡½æ•°åœ¨å¤åˆ¶è¿‡ç¨‹å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ç”šè‡³å‡ºé”™ï¼›</span><br><span class="line"># <span class="number">2.</span> MIXEDï¼šæ··åˆæ¨¡å¼ï¼Œæ ¹æ®è¯­å¥æ¥é€‰ç”¨æ˜¯ STATEMENT è¿˜æ˜¯ ROW æ¨¡å¼ï¼›</span><br><span class="line"># <span class="number">3.</span> ROWï¼šåŸºäºè¡Œçš„æ¨¡å¼ï¼Œè®°å½•çš„æ˜¯è¡Œçš„å®Œæ•´å˜åŒ–ã€‚å®‰å…¨ï¼Œä½† binlog ä¼šæ¯”å…¶ä»–ä¸¤ç§æ¨¡å¼å¤§å¾ˆå¤šï¼›</span><br><span class="line">binlog_format=ROW</span><br><span class="line"># FULLï¼šbinlogè®°å½•æ¯ä¸€è¡Œçš„å®Œæ•´å˜æ›´ MINIMALï¼šåªè®°å½•å½±å“åçš„è¡Œ</span><br><span class="line">binlog_row_image=FULL</span><br><span class="line"># æ—¥å¿—æ–‡ä»¶å¤§å°(#æ—¥å¿—æœ€å¤šå­˜æ”¾<span class="number">100</span>Mï¼Œè¶…è¿‡<span class="number">100</span>Måä¼šè¢«æ¸…é™¤)</span><br><span class="line">max_binlog_size=<span class="number">100</span>M</span><br><span class="line"># å®šä¹‰æ¸…é™¤è¿‡æœŸæ—¥å¿—çš„æ—¶é—´(è¿™é‡Œè®¾ç½®ä¸º<span class="number">7</span>å¤©)</span><br><span class="line">expire_logs_days=<span class="number">7</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ================= â†‘â†‘â†‘ mysqlä¸»ä»åŒæ­¥é…ç½®end â†‘â†‘â†‘ =================</span><br><span class="line"></span><br><span class="line"># å¼€å¯é”™è¯¯æ—¥å¿—</span><br><span class="line">log-error=/var/log/mysql/error/mysql.error.log</span><br><span class="line"># å¼€å¯generalæ—¥å¿—,è¿™ä¸ªæ—¥å¿—å¯ä»¥æŸ¥çœ‹è¿æ¥çš„ipä¿¡æ¯</span><br><span class="line">general_log = <span class="number">0</span></span><br><span class="line">general_log_file=/var/log/mysql/general/mysql.general.log</span><br><span class="line"></span><br><span class="line">######################## æ…¢SQLæ—¥å¿—è®°å½• å¼€å§‹ ########################</span><br><span class="line"> </span><br><span class="line">#æ˜¯å¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œ<span class="number">1</span>ä¸ºå¯ç”¨ï¼Œ<span class="number">0</span>ä¸ºç¦ç”¨  </span><br><span class="line">slow_query_log = <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">#æŒ‡å®šæ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„å’Œåå­—</span><br><span class="line">slow_query_log_file = /var/log/mysql/slow/mysql.slow.log</span><br><span class="line"> </span><br><span class="line">#æ…¢æŸ¥è¯¢æ‰§è¡Œçš„ç§’æ•°ï¼Œå¿…é¡»è¾¾åˆ°æ­¤å€¼å¯è¢«è®°å½•</span><br><span class="line">long_query_time = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line">#å°†æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„è¯­å¥è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—  </span><br><span class="line"># log_queries_not_using_indexes = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">#è®¾å®šæ¯åˆ†é’Ÿè®°å½•åˆ°æ—¥å¿—çš„æœªä½¿ç”¨ç´¢å¼•çš„è¯­å¥æ•°ç›®ï¼Œè¶…è¿‡è¿™ä¸ªæ•°ç›®ååªè®°å½•è¯­å¥æ•°é‡å’ŒèŠ±è´¹çš„æ€»æ—¶é—´  </span><br><span class="line"># log_throttle_queries_not_using_indexes = <span class="number">60</span></span><br><span class="line"> </span><br><span class="line">#å¯¹äºæŸ¥è¯¢æ‰«æè¡Œæ•°å°äºæ­¤å‚æ•°çš„SQLï¼Œå°†ä¸ä¼šè®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­</span><br><span class="line"># min_examined_row_limit = <span class="number">5000</span></span><br><span class="line"> </span><br><span class="line">#è®°å½•æ‰§è¡Œç¼“æ…¢çš„ç®¡ç†SQLï¼Œå¦‚alter table,analyze table, check table, create index, drop index, optimize table, repair tableç­‰ã€‚  </span><br><span class="line">log_slow_admin_statements = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">#ä½œä¸ºä»åº“æ—¶ç”Ÿæ•ˆ, ä»åº“å¤åˆ¶ä¸­å¦‚ä½•æœ‰æ…¢sqlä¹Ÿå°†è¢«è®°å½•</span><br><span class="line">#å¯¹äºROWæ ¼å¼binlogï¼Œä¸ç®¡æ‰§è¡Œæ—¶é—´æœ‰æ²¡æœ‰è¶…è¿‡é˜ˆå€¼ï¼Œéƒ½ä¸ä¼šå†™å…¥åˆ°ä»åº“çš„æ…¢æŸ¥è¯¢æ—¥å¿—</span><br><span class="line">log_slow_slave_statements = <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">######################## æ…¢SQLæ—¥å¿—è®°å½• ç»“æŸ ########################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è®¾ç½®æ—¥å¿—æ—¶é—´å’Œç³»ç»Ÿæ—¶é—´ä¸€è‡´</span><br><span class="line">log_timestamps=<span class="keyword">system</span></span><br><span class="line"># è®¾ç½®é»˜è®¤æ—¶åŒº</span><br><span class="line">default-time-zone=+<span class="number">08</span>:<span class="number">00</span></span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8mb4  # è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²MySql">æ­£å¼å¼€å§‹éƒ¨ç½²MySql</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p <span class="number">3306</span>:<span class="number">3306</span> \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=<span class="number">123</span> \</span><br><span class="line">  -v <span class="regexp">/mydata/</span>mysql<span class="regexp">/data:/</span><span class="keyword">var</span><span class="regexp">/lib/</span>mysql \</span><br><span class="line">  -v <span class="regexp">/mydata/</span>mysql<span class="regexp">/conf:/</span>etc<span class="regexp">/mysql/</span>conf.d \</span><br><span class="line">  -v <span class="regexp">/mydata/</span>mysql<span class="regexp">/init:/</span>docker-entrypoint-initdb.d \</span><br><span class="line">  -v <span class="regexp">/mydata/</span>mysql<span class="regexp">/logs:/</span><span class="keyword">var</span><span class="regexp">/log/</span>mysql \</span><br><span class="line">  --restart=always \</span><br><span class="line">  <span class="symbol">mysql:</span><span class="number">8.0</span><span class="number">.30</span></span><br></pre></td></tr></table></figure><p><code>docker run -d</code> ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ<code>-d</code>åˆ™æ˜¯è®©å®¹å™¨ä»¥åå°è¿›ç¨‹è¿è¡Œ</p><p><code>--name mysql</code> : ç»™å®¹å™¨èµ·ä¸ªåå­—å«<code>mysql</code>ï¼Œä½ å¯ä»¥å«åˆ«çš„</p><p><code>-p 3306:3306</code> : è®¾ç½®ç«¯å£æ˜ å°„(æ•°æ®åº“è¿™é‡Œå…¶å®ä¸ç”¨è®¾ç½®)ã€‚</p><ul><li><strong>å®¹å™¨æ˜¯éš”ç¦»ç¯å¢ƒ</strong>ï¼Œå¤–ç•Œä¸å¯è®¿é—®ã€‚ä½†æ˜¯å¯ä»¥<strong>å°†å®¿ä¸»æœºç«¯å£æ˜ å°„å®¹å™¨å†…åˆ°ç«¯å£</strong>ï¼Œå½“è®¿é—®å®¿ä¸»æœºæŒ‡å®šç«¯å£æ—¶ï¼Œå°±æ˜¯åœ¨è®¿é—®å®¹å™¨å†…çš„ç«¯å£äº†ã€‚</li><li>å®¹å™¨å†…ç«¯å£å¾€å¾€æ˜¯ç”±å®¹å™¨å†…çš„è¿›ç¨‹å†³å®šï¼Œä¾‹å¦‚MySQLè¿›ç¨‹é»˜è®¤ç«¯å£æ˜¯3306ï¼Œå› æ­¤å®¹å™¨å†…ç«¯å£ä¸€å®šæ˜¯3306ï¼›è€Œå®¿ä¸»æœºç«¯å£åˆ™å¯ä»¥ä»»æ„æŒ‡å®šï¼Œä¸€èˆ¬ä¸å®¹å™¨å†…ä¿æŒä¸€è‡´ã€‚</li><li>æ ¼å¼ï¼š <code>-p å®¿ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£</code>ï¼Œç¤ºä¾‹ä¸­å°±æ˜¯å°†å®¿ä¸»æœºçš„3306æ˜ å°„åˆ°å®¹å™¨å†…çš„3306ç«¯å£</li></ul><p><code>mysql</code> : è®¾ç½®<strong>é•œåƒ</strong>åç§°ï¼ŒDockerä¼šæ ¹æ®è¿™ä¸ªåå­—æœç´¢å¹¶ä¸‹è½½é•œåƒ</p><ul><li>æ ¼å¼ï¼š<code>REPOSITORY:TAG</code>ï¼Œä¾‹å¦‚<code>mysql:8.0</code>ï¼Œå…¶ä¸­<code>REPOSITORY</code>å¯ä»¥ç†è§£ä¸ºé•œåƒåï¼Œ<code>TAG</code>æ˜¯ç‰ˆæœ¬å·</li><li>åœ¨æœªæŒ‡å®š<code>TAG</code>çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯<code>mysql:latest</code></li><li>é•œåƒçš„åç§°ä¸æ˜¯éšæ„çš„ï¼Œè€Œæ˜¯è¦åˆ°DockerRegistryä¸­å¯»æ‰¾ï¼Œé•œåƒè¿è¡Œæ—¶çš„é…ç½®ä¹Ÿä¸æ˜¯éšæ„çš„ï¼Œè¦å‚è€ƒé•œåƒçš„å¸®åŠ©æ–‡æ¡£ï¼Œè¿™äº›åœ¨DockerHubç½‘ç«™æˆ–è€…è½¯ä»¶çš„å®˜æ–¹ç½‘ç«™ä¸­éƒ½èƒ½æ‰¾åˆ°ã€‚</li></ul><p><code>-v ./mysql/data:/var/lib/mysql</code>:è®¾ç½®æ•°æ®å·æˆ–æŒ‚è½½ç›®å½•</p><ul><li><p>æŒ‚è½½<code>/root/mysql/data</code>åˆ°å®¹å™¨å†…çš„<code>/var/lib/mysql</code>ç›®å½•</p></li><li><p>æŒ‚è½½<code>/root/mysql/init</code>åˆ°å®¹å™¨å†…çš„<code>/docker-entrypoint-initdb.d</code>ç›®å½•ï¼ˆåˆå§‹åŒ–çš„SQLè„šæœ¬ç›®å½•ï¼‰</p></li><li><p>æŒ‚è½½<code>/root/mysql/conf</code>åˆ°å®¹å™¨å†…çš„<code>/etc/mysql/conf.d</code>ç›®å½•ï¼ˆè¿™ä¸ªæ˜¯MySQLé…ç½®æ–‡ä»¶ç›®å½•ï¼‰</p></li></ul><h3 id="docker-composeéƒ¨ç½²">docker-composeéƒ¨ç½²</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">services:</span></span><br><span class="line"><span class="symbol">  mysql:</span></span><br><span class="line"><span class="symbol">    image:</span> mysql</span><br><span class="line"><span class="symbol">    container_name:</span> mysql</span><br><span class="line"><span class="symbol">    ports:</span></span><br><span class="line">      - <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      MYSQL_ROOT_PASSWORD:</span> <span class="number">123</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - <span class="string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span></span><br><span class="line">      - <span class="string">&quot;./mysql/data:/var/lib/mysql&quot;</span></span><br><span class="line"><span class="symbol">    networks:</span></span><br><span class="line">      - new</span><br><span class="line"><span class="symbol">networks:</span></span><br><span class="line"><span class="symbol">  new:</span></span><br><span class="line"><span class="symbol">   driver:</span> bridge</span><br><span class="line"><span class="symbol">   name:</span> obcn <span class="meta">#è®¾ç½®ç½‘ç»œçš„åç§°</span></span><br></pre></td></tr></table></figure><p><code>version</code>ï¼šæŒ‡å®šdocker-composeçš„ç‰ˆæœ¬</p><p><code>services</code>ï¼šå†™è¦é…ç½®çš„æœåŠ¡åˆ—è¡¨</p><ul><li><p>msqlï¼šæœåŠ¡çš„åç§°,å¦‚æœå¦‚æœä¸‹é¢æ²¡æœ‰æŒ‡å®š<code>container_name</code>çš„è¯,å®¹å™¨çš„åç§°é»˜è®¤å°±æ˜¯msql</p><ul><li><p><code>image</code>ï¼šå®¹å™¨è¦ä½¿ç”¨çš„é•œåƒ(æ²¡æœ‰æŒ‡å®štagçš„è¯,é»˜ä½¿ç”¨çš„æ˜¯latest)</p></li><li><p><code>container_name</code>ï¼šå®¹å™¨çš„åç§°</p></li><li><p><code>port</code>ï¼šé…ç½®ç«¯å£æ˜ å°„</p></li><li><p><code>environment</code>ï¼šé…ç½®ç¯å¢ƒå˜é‡</p></li><li><p><code>volumes</code>:æŒ‚è½½æ•°æ®å·æˆ–ç›®å½•</p></li><li><p><code>network</code>:è®¾ç½®å®¹å™¨çš„ç½‘ç»œ(ç½‘ç»œå¿…é¡»è¦æå‰åˆ›å»ºå¥½)</p></li></ul></li><li><p><code>networks</code>:åˆ›å»ºç½‘ç»œ</p><ul><li>new:ç½‘ç»œçš„æ ‡è¯†</li></ul></li></ul><h2 id="SqlServerçš„éƒ¨ç½²æ–¹æ³•">SqlServerçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-2">æ™®é€šéƒ¨ç½²</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d <span class="string">\</span></span><br><span class="line">  --name mssql <span class="string">\</span></span><br><span class="line">  -e <span class="string">&#x27;ACCEPT_EULA=Y&#x27;</span> <span class="string">\</span></span><br><span class="line">  -e <span class="string">&#x27;MSSQL_SA_PASSWORD=12345678&#x27;</span> <span class="string">\</span></span><br><span class="line">  -p <span class="number">1433</span>:<span class="number">1433</span> <span class="string">\</span></span><br><span class="line">  -v sqlvolume:/<span class="keyword">var</span>/opt/mssql <span class="string">\</span></span><br><span class="line">  mcr.microsoft.com/mssql/server</span><br></pre></td></tr></table></figure><p><code>docker run -d</code> ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ<code>-d</code>åˆ™æ˜¯è®©å®¹å™¨ä»¥åå°è¿›ç¨‹è¿è¡Œ</p><p><code>--name mysql</code> : ç»™å®¹å™¨èµ·ä¸ªåå­—å«<code>mysql</code>ï¼Œä½ å¯ä»¥å«åˆ«çš„</p><p><code>-e 'ACCEPT_EULA=Y'</code>:è¿™ä¸ªä¸çŸ¥é“æ˜¯å¹²ä»€ä¹ˆç”¨çš„,ä½†æ˜¯å¿…é¡»è¦å†™</p><p><code>-e 'MSSQL_SA_PASSWORD=mVp//159357'</code>:è¿™ä¸ªæ˜¯è®¾ç½®SqlServerçš„å¯†ç ,å¯†ç ä¸èƒ½å¤ªç®€å•,ä¸èƒ½ä½äº8ä½</p><p><code>-p 1433:1433</code>:è®¾ç½®ç«¯å£æ˜ å°„</p><p><code>-v sqlvolume:/var/opt/mssql</code>:æŒ‚è½½æ•°æ®å·sqlvolume,å¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</p><h3 id="docker-composeéƒ¨ç½²-2">docker-composeéƒ¨ç½²</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">version:</span> <span class="string">&quot;1.0&quot;</span></span><br><span class="line"><span class="symbol">services:</span> <span class="meta">#è¿™ä¸ªæ˜¯æœåŠ¡åˆ—è¡¨,ä¹Ÿå°±æ˜¯å®¹å™¨åˆ—è¡¨</span></span><br><span class="line"><span class="symbol">  mssql:</span> <span class="meta">#è¿™ä¸ªå¯ä»¥éšä¾¿èµ·åç§°(å¦‚æœæ²¡æœ‰è®¾ç½®container_nameè¿™ä¸ªå°±æ˜¯å®¹å™¨çš„åç§°)</span></span><br><span class="line"><span class="symbol">    image:</span> mcr.microsoft.com<span class="keyword">/mssql/</span>server:<span class="number">2022</span>-latest <span class="meta">#è¿™ä¸ªæ˜¯è®¾ç½®é•œåƒå</span></span><br><span class="line"><span class="symbol">    container_name:</span> mssql <span class="meta">#è¿™ä¸ªæ˜¯å®¹å™¨åç§°</span></span><br><span class="line"><span class="symbol">    ports:</span></span><br><span class="line">      - <span class="string">&quot;1433:1433&quot;</span> <span class="meta">#è¿™ä¸ªæ˜¯è®¾ç½®ç«¯å£æ˜ å°„,å‰é¢æ˜¯å®¿ä¸»æœºçš„ç«¯å£,åé¢æ˜¯å®¹å™¨çš„ç«¯å£</span></span><br><span class="line"><span class="symbol">    environment:</span> <span class="meta">#è¿™é‡Œæ˜¯é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="symbol">      MSSQL_SA_PASSWORD:</span> <span class="string">&quot;asfasfasfas&quot;</span> <span class="meta">#è¿™é‡Œå¯†ç ä¸èƒ½å¤ªç®€å•äº†</span></span><br><span class="line"><span class="symbol">      ACCEPT_EULA:</span> <span class="string">&quot;Y&quot;</span></span><br><span class="line"><span class="symbol">    volumes:</span> <span class="meta">#è¿™ä¸ªæ˜¯æ•°æ®å·æŒ‚è½½</span></span><br><span class="line">      - mssql-data:<span class="keyword">/var/</span>opt/mssql</span><br><span class="line"><span class="symbol">    networks:</span> <span class="meta">#è¿™ä¸ªæ˜¯ç½‘ç»œé…ç½®</span></span><br><span class="line">      - online-book-city-net</span><br><span class="line"><span class="symbol">networks:</span> <span class="meta">#è¿™ä¸ªæ˜¯åˆ›å»ºç½‘ç»œ</span></span><br><span class="line">  online-book-city-net: <span class="meta">#è¿™ä¸ªæ˜¯ç½‘ç»œçš„æ ‡è¯†</span></span><br><span class="line"><span class="symbol">    driver:</span> bridge</span><br><span class="line"><span class="symbol">    name:</span> obcn <span class="meta">#è®¾ç½®ç½‘ç»œçš„åç§°</span></span><br><span class="line"><span class="meta">#ä½¿ç”¨docker runåˆ›å»ºå®¹å™¨çš„æ—¶å€™-v æ•°æ®å·:å®¹å™¨å†…ç›®å½• è¿™ä¸ªæ•°æ®å·ä¼šè‡ªåŠ¨åˆ›å»º,ä½†æ˜¯åœ¨docker composeä¸­å¿…é¡»è¦é…ç½®volumes,ä¸ç„¶æ ¹æœ¬å°±è¿è¡Œä¸äº†</span></span><br><span class="line"><span class="symbol">volumes:</span></span><br><span class="line">  mssql-data:</span><br></pre></td></tr></table></figure><p><code>version</code>ï¼šæŒ‡å®šdocker-composeçš„ç‰ˆæœ¬</p><p><code>services</code>ï¼šå†™è¦é…ç½®çš„æœåŠ¡åˆ—è¡¨</p><ul><li><p>mssqlï¼šæœåŠ¡çš„åç§°,å¦‚æœå¦‚æœä¸‹é¢æ²¡æœ‰æŒ‡å®š<code>container_name</code>çš„è¯,å®¹å™¨çš„åç§°é»˜è®¤å°±æ˜¯msql</p><ul><li><p><code>image</code>ï¼šå®¹å™¨è¦ä½¿ç”¨çš„é•œåƒ(æ²¡æœ‰æŒ‡å®štagçš„è¯,é»˜ä½¿ç”¨çš„æ˜¯latest)</p></li><li><p><code>container_name</code>ï¼šå®¹å™¨çš„åç§°</p></li><li><p><code>port</code>ï¼šé…ç½®ç«¯å£æ˜ å°„</p></li><li><p><code>environment</code>ï¼šé…ç½®ç¯å¢ƒå˜é‡</p></li><li><p><code>volumes</code>:æŒ‚è½½æ•°æ®å·æˆ–ç›®å½•</p></li><li><p><code>network</code>:è®¾ç½®å®¹å™¨çš„ç½‘ç»œ(ç½‘ç»œå¿…é¡»è¦æå‰åˆ›å»ºå¥½)</p></li></ul></li><li><p><code>networks</code>:åˆ›å»ºç½‘ç»œ</p><ul><li>new:ç½‘ç»œçš„æ ‡è¯†</li></ul></li><li><p><code>volumes</code>:åˆ›å»ºæ•°æ®å·</p><ul><li>mssql-data:æ•°æ®å·åç§°</li></ul></li></ul><h2 id="MinIOçš„éƒ¨ç½²æ–¹æ³•">MinIOçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-3">æ™®é€šéƒ¨ç½²</h3><h3 id="å‰ç½®å·¥ä½œ-2">å‰ç½®å·¥ä½œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/minio/data</span><br><span class="line">mkdir -p /mydata/minio/config</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²">æ­£å¼å¼€å§‹éƒ¨ç½²</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  -p 9000:9000 -p 9090:9090 \</span><br><span class="line">  --name minio \</span><br><span class="line">  -d \</span><br><span class="line">  --restart=always \</span><br><span class="line">  -e &quot;MINIO_ACCESS_KEY=minioadmin&quot; \</span><br><span class="line">  -e &quot;MINIO_SECRET_KEY=minioadmin&quot; \</span><br><span class="line">  -v /mydata/minio/data:/data \</span><br><span class="line">  -v /mydata/minio/config:/root/.minio \</span><br><span class="line">  minio/minio:RELEASE.2022-01-04T07-41-07Z server \</span><br><span class="line">  /data --console-address &quot;:9090&quot; -address &quot;:9000&quot;</span><br></pre></td></tr></table></figure><p><code>mkdir</code> åœ¨ä¸»ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°ç›®å½• <code>/mydata/minio/data</code> ã€‚</p><p><code>docker run</code> å¯åŠ¨ MinIO å®¹å™¨ã€‚</p><p><code>-d</code> è®¾ç½®åå°è¿è¡Œ</p><p><code>--restart=always</code>è®¾ç½®å¯åŠ¨dockeræ—¶è‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨</p><p><code>-p</code> å°†æœ¬åœ°ç«¯å£ç»‘å®šåˆ°å®¹å™¨ç«¯å£ã€‚</p><p><code>-name</code> ä¸ºå®¹å™¨åˆ›å»ºåç§°ã€‚</p><p><code>-v</code> å°†æ–‡ä»¶è·¯å¾„è®¾ç½®ä¸ºå®¹å™¨è¦ä½¿ç”¨çš„æŒä¹…å·ä½ç½®ã€‚å½“ MinIO å°†æ•°æ®å†™å…¥ <code>/data</code> æ—¶ï¼Œè¯¥æ•°æ®ä¼šé•œåƒåˆ°æœ¬åœ°è·¯å¾„ <code>/mydata/minio/data</code> ï¼Œå…è®¸å®ƒåœ¨å®¹å™¨é‡å¯ä¹‹é—´æŒç»­å­˜åœ¨ã€‚æ‚¨å¯ä»¥æ›¿æ¢ä¸º <code>/mydata/minio/data</code> ç”¨æˆ·å…·æœ‰è¯»å–ã€å†™å…¥å’Œåˆ é™¤è®¿é—®æƒé™çš„å…¶ä»–æœ¬åœ°æ–‡ä»¶ä½ç½®ã€‚</p><p><code>-e</code> åˆ†åˆ«è®¾ç½®ç¯å¢ƒå˜é‡ <code>MINIO_ROOT_USER</code> å’Œ <code>MINIO_ROOT_PASSWORD</code> ã€‚è¿™äº›è®¾ç½®äº† root ç”¨æˆ·å‡­æ®ã€‚æ›´æ”¹è¦ç”¨äºå®¹å™¨çš„ç¤ºä¾‹å€¼ã€‚</p><p>è®¿é—®<code>ip:9090</code>è¿›å…¥minio</p><h2 id="Nacos2-Xçš„éƒ¨ç½²æ–¹æ³•">Nacos2.Xçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-4">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-3">å‰ç½®å·¥ä½œ</h4><p>å…ˆéƒ¨ç½²MySqlæ•°æ®åº“,ç„¶ååˆ›å»ºæ•°æ®åº“nacos_config</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  `c_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_use` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `effect` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_schema` text,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_aggr   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_aggr` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `datum_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;datum_id&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å†…å®¹&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¢åŠ ç§Ÿæˆ·å­—æ®µ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_beta   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_beta` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `beta_ips` <span class="type">varchar</span>(<span class="number">1024</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;betaIps&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_beta&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_tag   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_tag` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tag_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_tag&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_tags_relation   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_tags_relation` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `tag_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_name&#x27;</span>,</span><br><span class="line">  `tag_type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_type&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_tag_relation&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = group_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `group_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_group_id` (`group_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = his_config_info   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `his_config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">64</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `src_user` text,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `op_type` <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class="line">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class="line">  KEY `idx_did` (`data_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¤šç§Ÿæˆ·æ”¹é€ &#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = tenant_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Tenant ID&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `kp` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;kp&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tenant_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_name&#x27;</span>,</span><br><span class="line">  `tenant_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tenant_desc&#x27;</span>,</span><br><span class="line">  `create_source` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;create_source&#x27;</span>,</span><br><span class="line">  `gmt_create` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;tenant_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users` (</span><br><span class="line">	`username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	`password` <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`enabled` <span class="type">boolean</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `roles` (</span><br><span class="line">	`username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`role` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">UNIQUE</span> INDEX `idx_user_role` (`username` <span class="keyword">ASC</span>, `role` <span class="keyword">ASC</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `permissions` (</span><br><span class="line">    `role` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `resource` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `action` <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">UNIQUE</span> INDEX `uk_role_permission` (`role`,`resource`,`action`) <span class="keyword">USING</span> BTREE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> users (username, password, enabled) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;</span>, <span class="literal">TRUE</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> roles (username, role) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;ROLE_ADMIN&#x27;</span>);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå“åº”çš„æ•°æ®å·ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/nacos/logs/                      #æ–°å»ºlogsç›®å½•</span><br><span class="line">mkdir -p /mydata/nacos/conf/						#æ–°å»ºconfç›®å½•</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8848:8848 --name nacos -d nacos/nacos-server</span><br></pre></td></tr></table></figure><p>å¤åˆ¶æ–‡ä»¶(è¿™ä¸ªæ˜¯æ–¹ä¾¿åé¢ä¿®æ”¹é…ç½®ä¿¡æ¯,ç‰¹åˆ«æ˜¯å…³äºmysqlçš„)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp nacos:/home/nacos/logs/ /mydata/nacos/</span><br><span class="line">docker cp nacos:/home/nacos/conf/ /mydata/nacos/</span><br></pre></td></tr></table></figure><p>ç§»é™¤å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f nacos</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Nacos">æ­£å¼å¼€å§‹éƒ¨ç½²Nacos</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p 8848:8848 \</span><br><span class="line">  -p 9848:9848 \</span><br><span class="line">  -p 9849:9849 \</span><br><span class="line">  --name nacos \</span><br><span class="line">  --privileged=true \</span><br><span class="line">  -e JVM_XMS=256m \</span><br><span class="line">  -e JVM_XMX=256m \</span><br><span class="line">  -e NACOS_SERVER_PORT=8848 \</span><br><span class="line">  -e MYSQL_SERVICE_PORT=3306 \</span><br><span class="line">  -e MYSQL_SERVICE_DB_NAME=nacos-config \</span><br><span class="line">  -e MYSQL_SERVICE_USER=root \</span><br><span class="line">  -e MYSQL_SERVICE_PASSWORD=mVp//159357 \</span><br><span class="line">  -e MYSQL_SERVICE_HOST=è™šæ‹Ÿæœº/äº‘æœåŠ¡åœ°å€ \</span><br><span class="line">  -e MYSQL_SERVICE_DB_PARAM=&quot;characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=30000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&quot; \</span><br><span class="line">  -e MODE=standalone \</span><br><span class="line">  -e SPRING_DATASOURCE_PLATFORM=mysql \</span><br><span class="line">  -v /mydata/nacos/logs/:/home/nacos/logs \</span><br><span class="line">  -v /mydata/nacos/conf/:/home/nacos/conf/ \</span><br><span class="line">  --restart=always \</span><br><span class="line">  nacos/nacos-server</span><br></pre></td></tr></table></figure><p><code>docker run</code> å¯åŠ¨ Nacos å®¹å™¨ã€‚</p><p><code>-d</code>è®¾ç½®åå°è¿è¡Œ</p><p><code>--name</code>è®¾ç½®å®¹å™¨çš„åç§°</p><p><code>-p</code>æŒ‡å®šç«¯å£æ˜ å°„</p><p><code>--privileged=true</code>æ‰©å¤§å®¹å™¨å†…çš„æƒé™ï¼Œå°†å®¹å™¨å†…çš„æƒé™å˜ä¸ºrootæƒé™ï¼Œä¸åŠ çš„è¯å°±æ˜¯æ™®é€šç”¨æˆ·æƒé™ï¼Œå¯èƒ½ä¼šå‡ºç°cannot open directory</p><p><code>-e JVM_XMS=256m</code>ä¸ºjvmå¯åŠ¨æ—¶åˆ†é…çš„å†…å­˜(é»˜è®¤ :1g)</p><p><code>-e JVM_XMX=256m</code>ä¸ºjvmè¿è¡Œè¿‡ç¨‹ä¸­åˆ†é…çš„æœ€å¤§å†…å­˜(é»˜è®¤ :1g)</p><p><code>-e NACOS_SERVER_PORT=8848</code>è®¾ç½®nacosçš„ç«¯å£æ˜ å°„(é»˜è®¤:8848)</p><p><code>-e MYSQL_SERVICE_PORT=3306</code>è®¾ç½®mysqlçš„ç«¯å£(é»˜è®¤:3306)</p><p><code>-e MYSQL_SERVICE_DB_NAME=nacos-config</code>è®¾ç½®è¿æ¥çš„æ•°æ®åº“</p><p><code>-e MYSQL_SERVICE_USER=root</code>è®¾ç½®è¿æ¥mysqlçš„ç”¨æˆ·å</p><p><code>-e MYSQL_SERVICE_PASSWORD=password</code>è®¾ç½®è¿æ¥mysqlçš„å¯†ç </p><p><code>-e MYSQL_SERVICE_HOST=è™šæ‹Ÿæœº/äº‘æœåŠ¡åœ°å€</code>è®¾ç½®æ•°æ®åº“çš„è¿æ¥åœ°å€(è™šæ‹Ÿæœº/äº‘æœåŠ¡çš„åœ°å€,<strong>ä¸èƒ½å†™localhost,å› ä¸ºå¦‚æœå†™localhostçš„è¯,è®¿é—®çš„æ˜¯å®‰è£…åœ¨nacoså®¹å™¨ä¸­çš„mysqlæ•°æ®åº“,é™¤éåœ¨nacoså®¹å™¨ä¸­çœŸçš„å®‰è£…äº†mysqlæ•°æ®åº“,å¦åˆ™æŠ¥è®¿é—®ä¸åˆ°æ•°æ®æºçš„å¼‚å¸¸,å› æ­¤è¿™é‡Œè¦é…ç½®å®¿ä¸»æœºçš„IP</strong>)</p><p><code>-e MYSQL_SERVICE_DB_PARAM=&quot;characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=30000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&quot;</code>è¿™ä¸ªä¸ºæ•°æ®åº“è¿æ¥å‚æ•°æ˜¯å¿…é¡»è¦è®¾ç½®çš„</p><p><code>-e MODE=standalone</code>è®¾ç½®ä»¥å•æœºçš„æ¨¡å¼éƒ¨ç½²nacos(cluster/standaloneé»˜è®¤ <strong>cluster</strong>)</p><p><code>-e SPRING_DATASOURCE_PLATFORM=mysql</code> å•æœºæ¨¡å¼ä¸‹æ”¯æŒMYSQLæ•°æ®åº“(mysql / ç©º é»˜è®¤:ç©º)</p><p><code>-v /mydata/nacos/logs/:/home/nacos/logs</code>å°†å®¹å™¨çš„/home/nacos/logsç›®å½•æŒ‚è½½åˆ° /mydata/nacos/logs</p><p><code>-v /mydata/nacos/conf/:/home/nacos/conf/</code>å°†å®¹å™¨çš„/home/nacos/confç›®å½•æŒ‚è½½åˆ° /mydata/nacos/conf</p><p>Nacosä¸­çš„é…ç½®æ–‡ä»¶</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="assets/Snipaste_2023-12-31_16-54-10.png" alt="Snipaste_2023-12-31_16-54-10"></p><p>å¼€æ”¾é˜²ç«å¢™ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å¼€æ”¾ç«¯å£8848 9848 9849</span></span></span><br><span class="line">firewall-cmd --zone=public --add-port=8848/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=9848/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=9849/tcp --permanent</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># é‡å¯é˜²ç«å¢™</span></span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰å¼€å¯çš„ç«¯å£</span></span></span><br><span class="line">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure><p>å…³äºNo DataSource setæŠ¥é”™</p><p>è§£å†³åŠæ³•ï¼šåœ¨JDBCè¿æ¥urlä¸Šè®¾ç½®å‚æ•°<code>allowPublicKeyRetrieval=true</code>(è¿˜æœ‰çš„è¯´è¦å¼€æ”¾3306ç«¯å£,ä¸çŸ¥é“æ˜¯å¦æ˜¯çœŸçš„éœ€è¦)</p><p><code>æ³¨æ„</code>:Javaä¸­1.xç‰ˆæœ¬çš„nacoså®¢æˆ·ç«¯è¿ä¸äº†2.xç‰ˆæœ¬çš„nacos</p><h2 id="Nacos1-Xçš„éƒ¨ç½²æ–¹æ³•">Nacos1.Xçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-5">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-4">å‰ç½®å·¥ä½œ</h4><p>å…ˆéƒ¨ç½²MySqlæ•°æ®åº“,ç„¶ååˆ›å»ºæ•°æ®åº“<code>nacos_config</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 1999-2018 Alibaba Group Holding Ltd.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  `c_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_use` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `effect` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_schema` text,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_aggr   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_aggr` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `datum_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;datum_id&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å†…å®¹&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¢åŠ ç§Ÿæˆ·å­—æ®µ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_beta   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_beta` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `beta_ips` <span class="type">varchar</span>(<span class="number">1024</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;betaIps&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_beta&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_tag   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_tag` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tag_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_tag&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_tags_relation   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_tags_relation` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `tag_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_name&#x27;</span>,</span><br><span class="line">  `tag_type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_type&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_tag_relation&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = group_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `group_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_group_id` (`group_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = his_config_info   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `his_config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">64</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span>,</span><br><span class="line">  `src_user` text,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `op_type` <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class="line">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class="line">  KEY `idx_did` (`data_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¤šç§Ÿæˆ·æ”¹é€ &#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = tenant_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Tenant ID&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2010-05-05 00:00:00&#x27;</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `kp` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;kp&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tenant_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_name&#x27;</span>,</span><br><span class="line">  `tenant_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tenant_desc&#x27;</span>,</span><br><span class="line">  `create_source` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;create_source&#x27;</span>,</span><br><span class="line">  `gmt_create` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;tenant_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">	username <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	password <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	enabled <span class="type">boolean</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> roles (</span><br><span class="line">	username <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	role <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">constraint</span> uk_username_role <span class="keyword">UNIQUE</span> (username,role)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> permissions (</span><br><span class="line">    role <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    resource <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    action <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">constraint</span> uk_role_permission <span class="keyword">UNIQUE</span> (role,resource,action)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> users (username, password, enabled) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;</span>, <span class="literal">TRUE</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> roles (username, role) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;ROLE_ADMIN&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æ‹‰å–ç›¸åº”çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nacos/nacos-server:1.4.2</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå“åº”çš„æ•°æ®å·ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/nacos/logs/                      #æ–°å»ºlogsç›®å½•</span><br><span class="line">mkdir -p /mydata/nacos/conf/                      #æ–°å»ºconfç›®å½•</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8848:8848 --name nacos -d nacos/nacos-server:1.4.2</span><br></pre></td></tr></table></figure><p>å¤åˆ¶æ–‡ä»¶(è¿™ä¸ªæ˜¯æ–¹ä¾¿åé¢ä¿®æ”¹é…ç½®ä¿¡æ¯,ç‰¹åˆ«æ˜¯å…³äºmysqlçš„)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp nacos:/home/nacos/logs/ /mydata/nacos/</span><br><span class="line">docker cp nacos:/home/nacos/conf/ /mydata/nacos/</span><br></pre></td></tr></table></figure><p>ç§»é™¤å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f nacos</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Nacos-2">æ­£å¼å¼€å§‹éƒ¨ç½²Nacos</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p 8848:8848 \</span><br><span class="line">  --name nacos \</span><br><span class="line">  --privileged=true \</span><br><span class="line">  -e JVM_XMS=256m \</span><br><span class="line">  -e JVM_XMX=256m \</span><br><span class="line">  -e NACOS_SERVER_PORT=8848 \</span><br><span class="line">  -e MYSQL_SERVICE_PORT=3306 \</span><br><span class="line">  -e MYSQL_SERVICE_DB_NAME=nacos_config \</span><br><span class="line">  -e MYSQL_SERVICE_USER=root \</span><br><span class="line">  -e MYSQL_SERVICE_PASSWORD=mVp//159357 \</span><br><span class="line">  -e MYSQL_SERVICE_HOST=è™šæ‹Ÿæœº/äº‘æœåŠ¡åœ°å€ \</span><br><span class="line">  -e MYSQL_SERVICE_DB_PARAM=&quot;characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=30000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&quot; \</span><br><span class="line">  -e MODE=standalone \</span><br><span class="line">  -e SPRING_DATASOURCE_PLATFORM=mysql \</span><br><span class="line">  -v /mydata/nacos/logs/:/home/nacos/logs \</span><br><span class="line">  -v /mydata/nacos/conf/:/home/nacos/conf/ \</span><br><span class="line">  --restart=always \</span><br><span class="line">  nacos/nacos-server:1.4.2</span><br></pre></td></tr></table></figure><p>å’Œ2.Xç‰ˆæœ¬çš„åŸºæœ¬ä¸Šä¸€æ ·,å°±æ˜¯åªç”¨è¿›è¡Œä¸€ä¸ªç«¯å£æ˜ å°„å°±è¡Œäº†</p><h2 id="XXL-JOBçš„éƒ¨ç½²æ–¹æ³•">XXL-JOBçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-6">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-5">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºxxl-jobéœ€è¦çš„æ•°æ®åº“(ç›´æ¥è¿è¡Œä¸‹é¢çš„sqlè„šæœ¬å°±è¡Œäº†,æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºå¥½)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># XXL<span class="operator">-</span>JOB v2<span class="number">.3</span><span class="number">.1</span></span><br><span class="line"># Copyright (c) <span class="number">2015</span><span class="operator">-</span>present, xuxueli.</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> database if <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `xxl_job` <span class="keyword">default</span> <span class="type">character</span> <span class="keyword">set</span> utf8mb4 <span class="keyword">collate</span> utf8mb4_unicode_ci;</span><br><span class="line">use `xxl_job`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_info` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `job_group` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `job_desc` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `add_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä½œè€…&#x27;</span>,</span><br><span class="line">  `alarm_email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æŠ¥è­¦é‚®ä»¶&#x27;</span>,</span><br><span class="line">  `schedule_type` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;NONE&#x27;</span> COMMENT <span class="string">&#x27;è°ƒåº¦ç±»å‹&#x27;</span>,</span><br><span class="line">  `schedule_conf` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è°ƒåº¦é…ç½®ï¼Œå€¼å«ä¹‰å–å†³äºè°ƒåº¦ç±»å‹&#x27;</span>,</span><br><span class="line">  `misfire_strategy` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;DO_NOTHING&#x27;</span> COMMENT <span class="string">&#x27;è°ƒåº¦è¿‡æœŸç­–ç•¥&#x27;</span>,</span><br><span class="line">  `executor_route_strategy` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨è·¯ç”±ç­–ç•¥&#x27;</span>,</span><br><span class="line">  `executor_handler` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä»»åŠ¡handler&#x27;</span>,</span><br><span class="line">  `executor_param` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä»»åŠ¡å‚æ•°&#x27;</span>,</span><br><span class="line">  `executor_block_strategy` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é˜»å¡å¤„ç†ç­–ç•¥&#x27;</span>,</span><br><span class="line">  `executor_timeout` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä»»åŠ¡æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’&#x27;</span>,</span><br><span class="line">  `executor_fail_retry_count` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å¤±è´¥é‡è¯•æ¬¡æ•°&#x27;</span>,</span><br><span class="line">  `glue_type` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;GLUEç±»å‹&#x27;</span>,</span><br><span class="line">  `glue_source` mediumtext COMMENT <span class="string">&#x27;GLUEæºä»£ç &#x27;</span>,</span><br><span class="line">  `glue_remark` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;GLUEå¤‡æ³¨&#x27;</span>,</span><br><span class="line">  `glue_updatetime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;GLUEæ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">  `child_jobid` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å­ä»»åŠ¡IDï¼Œå¤šä¸ªé€—å·åˆ†éš”&#x27;</span>,</span><br><span class="line">  `trigger_status` tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;è°ƒåº¦çŠ¶æ€ï¼š0-åœæ­¢ï¼Œ1-è¿è¡Œ&#x27;</span>,</span><br><span class="line">  `trigger_last_time` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä¸Šæ¬¡è°ƒåº¦æ—¶é—´&#x27;</span>,</span><br><span class="line">  `trigger_next_time` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä¸‹æ¬¡è°ƒåº¦æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_log` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `job_group` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `job_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä»»åŠ¡ï¼Œä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `executor_address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨åœ°å€ï¼Œæœ¬æ¬¡æ‰§è¡Œçš„åœ°å€&#x27;</span>,</span><br><span class="line">  `executor_handler` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä»»åŠ¡handler&#x27;</span>,</span><br><span class="line">  `executor_param` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä»»åŠ¡å‚æ•°&#x27;</span>,</span><br><span class="line">  `executor_sharding_param` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨ä»»åŠ¡åˆ†ç‰‡å‚æ•°ï¼Œæ ¼å¼å¦‚ 1/2&#x27;</span>,</span><br><span class="line">  `executor_fail_retry_count` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å¤±è´¥é‡è¯•æ¬¡æ•°&#x27;</span>,</span><br><span class="line">  `trigger_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è°ƒåº¦-æ—¶é—´&#x27;</span>,</span><br><span class="line">  `trigger_code` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è°ƒåº¦-ç»“æœ&#x27;</span>,</span><br><span class="line">  `trigger_msg` text COMMENT <span class="string">&#x27;è°ƒåº¦-æ—¥å¿—&#x27;</span>,</span><br><span class="line">  `handle_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œ-æ—¶é—´&#x27;</span>,</span><br><span class="line">  `handle_code` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œ-çŠ¶æ€&#x27;</span>,</span><br><span class="line">  `handle_msg` text COMMENT <span class="string">&#x27;æ‰§è¡Œ-æ—¥å¿—&#x27;</span>,</span><br><span class="line">  `alarm_status` tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å‘Šè­¦çŠ¶æ€ï¼š0-é»˜è®¤ã€1-æ— éœ€å‘Šè­¦ã€2-å‘Šè­¦æˆåŠŸã€3-å‘Šè­¦å¤±è´¥&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `I_trigger_time` (`trigger_time`),</span><br><span class="line">  KEY `I_handle_code` (`handle_code`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_log_report` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `trigger_day` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è°ƒåº¦-æ—¶é—´&#x27;</span>,</span><br><span class="line">  `running_count` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;è¿è¡Œä¸­-æ—¥å¿—æ•°é‡&#x27;</span>,</span><br><span class="line">  `suc_count` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ‰§è¡ŒæˆåŠŸ-æ—¥å¿—æ•°é‡&#x27;</span>,</span><br><span class="line">  `fail_count` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå¤±è´¥-æ—¥å¿—æ•°é‡&#x27;</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `i_trigger_day` (`trigger_day`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_logglue` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `job_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä»»åŠ¡ï¼Œä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `glue_type` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;GLUEç±»å‹&#x27;</span>,</span><br><span class="line">  `glue_source` mediumtext COMMENT <span class="string">&#x27;GLUEæºä»£ç &#x27;</span>,</span><br><span class="line">  `glue_remark` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;GLUEå¤‡æ³¨&#x27;</span>,</span><br><span class="line">  `add_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_registry` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `registry_group` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `registry_key` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `registry_value` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `i_g_k_v` (`registry_group`,`registry_key`,`registry_value`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_group` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨AppName&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨åç§°&#x27;</span>,</span><br><span class="line">  `address_type` tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨åœ°å€ç±»å‹ï¼š0=è‡ªåŠ¨æ³¨å†Œã€1=æ‰‹åŠ¨å½•å…¥&#x27;</span>,</span><br><span class="line">  `address_list` text COMMENT <span class="string">&#x27;æ‰§è¡Œå™¨åœ°å€åˆ—è¡¨ï¼Œå¤šåœ°å€é€—å·åˆ†éš”&#x27;</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_user` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `role` tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è§’è‰²ï¼š0-æ™®é€šç”¨æˆ·ã€1-ç®¡ç†å‘˜&#x27;</span>,</span><br><span class="line">  `permission` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æƒé™ï¼šæ‰§è¡Œå™¨IDåˆ—è¡¨ï¼Œå¤šä¸ªé€—å·åˆ†å‰²&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `i_username` (`username`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `xxl_job_lock` (</span><br><span class="line">  `lock_name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é”åç§°&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`lock_name`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `xxl_job_group`(`id`, `app_name`, `title`, `address_type`, `address_list`, `update_time`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;xxl-job-executor-sample&#x27;</span>, <span class="string">&#x27;ç¤ºä¾‹æ‰§è¡Œå™¨&#x27;</span>, <span class="number">0</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;2018-11-03 22:21:31&#x27;</span> );</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `xxl_job_info`(`id`, `job_group`, `job_desc`, `add_time`, `update_time`, `author`, `alarm_email`, `schedule_type`, `schedule_conf`, `misfire_strategy`, `executor_route_strategy`, `executor_handler`, `executor_param`, `executor_block_strategy`, `executor_timeout`, `executor_fail_retry_count`, `glue_type`, `glue_source`, `glue_remark`, `glue_updatetime`, `child_jobid`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;æµ‹è¯•ä»»åŠ¡1&#x27;</span>, <span class="string">&#x27;2018-11-03 22:21:31&#x27;</span>, <span class="string">&#x27;2018-11-03 22:21:31&#x27;</span>, <span class="string">&#x27;XXL&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;CRON&#x27;</span>, <span class="string">&#x27;0 0 0 * * ? *&#x27;</span>, <span class="string">&#x27;DO_NOTHING&#x27;</span>, <span class="string">&#x27;FIRST&#x27;</span>, <span class="string">&#x27;demoJobHandler&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;SERIAL_EXECUTION&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;BEAN&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;GLUEä»£ç åˆå§‹åŒ–&#x27;</span>, <span class="string">&#x27;2018-11-03 22:21:31&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `xxl_job_user`(`id`, `username`, `password`, `role`, `permission`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span>, <span class="number">1</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `xxl_job_lock` ( `lock_name`) <span class="keyword">VALUES</span> ( <span class="string">&#x27;schedule_lock&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure><p>æ‹‰å–xxl-jobçš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull xuxueli/xxl-job-admin:2.3.1</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¦æŒ‚è½½çš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/xxl-job/admin/logs</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²XXL-JOB">æ­£å¼å¼€å§‹éƒ¨ç½²XXL-JOB</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-d \</span><br><span class="line">--name xxl-job \</span><br><span class="line">-p 18080:8080 \</span><br><span class="line">--privileged=true \</span><br><span class="line">-e PARAMS=&quot; \</span><br><span class="line">--spring.datasource.url=jdbc:mysql://192.168.190.128:3306/xxl_job?Unicode=true&amp;characterEncoding=UTF-8 \</span><br><span class="line">--spring.datasource.username=root \</span><br><span class="line">--spring.datasource.password=mVp//159357 \</span><br><span class="line">--xxl.job.accessToken=lambda&quot; \</span><br><span class="line">-v /mydata/xxl-job/admin/logs:/data/applogs \</span><br><span class="line">xuxueli/xxl-job-admin:2.3.1</span><br></pre></td></tr></table></figure><p><code>docker run</code> å¯åŠ¨ XXL-JOB å®¹å™¨ã€‚</p><p><code>-d</code>è®¾ç½®åå°è¿è¡Œ</p><p><code>--name</code>è®¾ç½®å®¹å™¨çš„åç§°</p><p><code>-p</code>æŒ‡å®šç«¯å£æ˜ å°„</p><p><code>--privileged=true</code>æ‰©å¤§å®¹å™¨å†…çš„æƒé™ï¼Œå°†å®¹å™¨å†…çš„æƒé™å˜ä¸ºrootæƒé™ï¼Œä¸åŠ çš„è¯å°±æ˜¯æ™®é€šç”¨æˆ·æƒé™ï¼Œå¯èƒ½ä¼šå‡ºç°cannot open directory</p><p><code>-e</code>è¿™äº›éƒ½æ˜¯ä¿®æ”¹å…¶application.propertiesä¸­çš„å€¼,éœ€è¦æ³¨æ„çš„æ˜¯<strong>spring.datasource.urlè¿™é‡Œçš„æ•°æ®åº“åœ°å€ä¸èƒ½å†™localhost,åŸå› å’Œä¸Šé¢çš„nacosä¸€æ ·</strong></p><p><code>xxl.job.accessToken=lambda</code>è¿™ä¸ªéœ€è¦æ³¨æ„ä¸€ä¸‹,<strong>ç­‰ä¸‹è‡ªåŠ¨æ³¨å…¥çš„æ—¶å€™è¦å’Œè¿™é‡Œå†™çš„accessTokenä¸€æ ·,å¦‚æœæ²¡æœ‰é…ç½®çš„è¯,é»˜è®¤æ˜¯defalut_token</strong></p><p><code>-v /usr/local/xxl-job/admin/logs:/data/applogs</code>æŒ‚è½½æ—¥å¿—ç›®å½•</p><p>å¯åŠ¨åè®¿é—®http://192.168.190.128:18080/xxl-job-admin/,<strong>é»˜è®¤è´¦å·:admin</strong>,<strong>å¯†ç :123456</strong></p><h3 id="æ‰©å±•">æ‰©å±•</h3><h4 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h4><p>Javaä¸­å¯¼å…¥å¯¹åº”çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå»githubä¸Šä¸‹è½½æºç </p><p><a href="xxl-job-2.3.1.zip">xxl-job-2.3.1.zip</a></p><h2 id="Redisçš„éƒ¨ç½²æ–¹æ³•">Redisçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-7">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-6">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–ç›¸åº”çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis:7.0.15</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå“åº”çš„æ•°æ®å·ç›®å½•å’Œé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/redis/data/                      #æ–°å»ºlogsç›®å½•</span><br><span class="line">mkdir -p /mydata/redis/conf/                      #æ–°å»ºconfç›®å½•</span><br><span class="line">mkdir -p /mydata/redis/logs/</span><br><span class="line">touch /mydata/redis/conf/redis.conf               #åˆ›å»ºé…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>ç¼–å†™é…ç½®æ–‡ä»¶(<a target="_blank" rel="noopener" href="https://blog.csdn.net/javaxueba/article/details/134800960">docker å®‰è£…Redis ï¼ˆå…¨ç½‘æœ€è¯¦ç»†ï¼šé™„å¸¦é…ç½®æ–‡ä»¶ï¼‰_dockerfile redis å®‰è£…ä»€ä¹ˆç‰ˆæœ¬-CSDNåšå®¢</a>)</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># RedisæœåŠ¡å™¨é…ç½® </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç»‘å®šIPåœ°å€</span></span><br><span class="line"><span class="comment">#è§£é™¤æœ¬åœ°é™åˆ¶ æ³¨é‡Šbind 127.0.0.1  </span></span><br><span class="line"><span class="comment">#bind 127.0.0.1  </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç«¯å£å·  </span></span><br><span class="line"><span class="string">port</span> <span class="string">6379</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#é…ç½®å¯†ç ï¼Œä¸è¦å¯ä»¥åˆ æ‰</span></span><br><span class="line"><span class="string">requirepass</span> <span class="string">114514CSUFT</span></span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#è¿™ä¸ªé…ç½®ä¸è¦ä¼šå’Œdocker -d å‘½ä»¤ å†²çª</span></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨è¿è¡Œæ¨¡å¼ï¼ŒRedisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œ,é»˜è®¤ä¸ºnoï¼Œæ”¹ä¸ºyesæ„ä¸ºä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ï¼Œå¯åå°è¿è¡Œï¼Œé™¤ékillè¿›ç¨‹ï¼Œæ”¹ä¸ºyesä¼šä½¿é…ç½®æ–‡ä»¶æ–¹å¼å¯åŠ¨rediså¤±è´¥ï¼Œå¦‚æœåé¢rediså¯åŠ¨å¤±è´¥ï¼Œå°±å°†è¿™ä¸ªæ³¨é‡Šæ‰</span></span><br><span class="line"><span class="string">daemonize</span> <span class="string">no</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#å½“Redisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶ï¼ŒRedisé»˜è®¤ä¼šæŠŠpidå†™å…¥/var/run/redis.pidæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡pidfileæŒ‡å®š(è‡ªå®šä¹‰)</span></span><br><span class="line"><span class="comment">#pidfile /data/dockerData/redis/run/redis6379.pid  </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#é»˜è®¤ä¸ºnoï¼ŒredisæŒä¹…åŒ–ï¼Œå¯ä»¥æ”¹ä¸ºyes</span></span><br><span class="line"><span class="string">appendonly</span> <span class="string">yes</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#å½“å®¢æˆ·ç«¯é—²ç½®å¤šé•¿æ—¶é—´åå…³é—­è¿æ¥ï¼Œå¦‚æœæŒ‡å®šä¸º0ï¼Œè¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½</span></span><br><span class="line"><span class="string">timeout</span> <span class="string">60</span></span><br><span class="line"><span class="comment"># æœåŠ¡å™¨ç³»ç»Ÿé»˜è®¤é…ç½®å‚æ•°å½±å“ Redis çš„åº”ç”¨</span></span><br><span class="line"><span class="string">maxclients</span> <span class="string">10000</span></span><br><span class="line"><span class="string">tcp-keepalive</span> <span class="string">300</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆï¼ˆåˆ†åˆ«è¡¨ç¤º900ç§’ï¼ˆ15åˆ†é’Ÿï¼‰å†…æœ‰1ä¸ªæ›´æ”¹ï¼Œ300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰å†…æœ‰10ä¸ªæ›´æ”¹ä»¥åŠ60ç§’å†…æœ‰10000ä¸ªæ›´æ”¹ï¼‰</span></span><br><span class="line"><span class="string">save</span> <span class="string">900</span> <span class="string">1</span></span><br><span class="line"><span class="string">save</span> <span class="string">300</span> <span class="string">10</span></span><br><span class="line"><span class="string">save</span> <span class="string">60</span> <span class="string">10000</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æŒ‰éœ€æ±‚è°ƒæ•´ Redis çº¿ç¨‹æ•°</span></span><br><span class="line"><span class="string">tcp-backlog</span> <span class="string">511</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># è®¾ç½®æ•°æ®åº“æ•°é‡ï¼Œè¿™é‡Œè®¾ç½®ä¸º16ä¸ªæ•°æ®åº“  </span></span><br><span class="line"><span class="string">databases</span> <span class="string">16</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¯ç”¨ AOF, AOFå¸¸è§„é…ç½®</span></span><br><span class="line"><span class="string">appendonly</span> <span class="string">yes</span></span><br><span class="line"><span class="string">appendfsync</span> <span class="string">everysec</span></span><br><span class="line"><span class="string">no-appendfsync-on-rewrite</span> <span class="string">no</span></span><br><span class="line"><span class="string">auto-aof-rewrite-percentage</span> <span class="string">100</span></span><br><span class="line"><span class="string">auto-aof-rewrite-min-size</span> <span class="string">64mb</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ…¢æŸ¥è¯¢é˜ˆå€¼</span></span><br><span class="line"><span class="string">slowlog-log-slower-than</span> <span class="string">10000</span></span><br><span class="line"><span class="string">slowlog-max-len</span> <span class="string">128</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ˜¯å¦è®°å½•ç³»ç»Ÿæ—¥å¿—ï¼Œé»˜è®¤ä¸ºyes  </span></span><br><span class="line"><span class="string">syslog-enabled</span> <span class="string">yes</span>  </span><br><span class="line"> </span><br><span class="line"><span class="comment">#æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«ï¼ŒRedisæ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebugã€verboseã€noticeã€warningï¼Œé»˜è®¤ä¸ºverbose</span></span><br><span class="line"><span class="string">loglevel</span> <span class="string">notice</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ—¥å¿—è¾“å‡ºæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºstdoutï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ–‡ä»¶è·¯å¾„  </span></span><br><span class="line"><span class="string">logfile</span> <span class="string">stdout</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># logfile /var/log/redis/redis-server.log</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç³»ç»Ÿå†…å­˜è°ƒä¼˜å‚æ•°   </span></span><br><span class="line"><span class="comment"># æŒ‰éœ€æ±‚è®¾ç½®</span></span><br><span class="line"><span class="string">hash-max-ziplist-entries</span> <span class="string">512</span></span><br><span class="line"><span class="string">hash-max-ziplist-value</span> <span class="string">64</span></span><br><span class="line"><span class="built_in">list-max-ziplist-entries</span> <span class="string">512</span></span><br><span class="line"><span class="built_in">list-max-ziplist-value</span> <span class="string">64</span></span><br><span class="line"><span class="built_in">set-max-intset-entries</span> <span class="string">512</span></span><br><span class="line"><span class="string">zset-max-ziplist-entries</span> <span class="string">128</span></span><br><span class="line"><span class="string">zset-max-ziplist-value</span> <span class="string">64</span></span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Redis">æ­£å¼å¼€å§‹éƒ¨ç½²Redis</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 6379:6379 --name redis \</span><br><span class="line">-v /mydata/redis/data:/data \</span><br><span class="line">-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">--restart=always \</span><br><span class="line">-d redis:7.0.15 redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure><p><code>-v /mydata/redis/data:/data</code>è¿™ä¸ªæ˜¯è®¾ç½®å­˜å‚¨æ•°æ®çš„ç›®å½•</p><p><code>-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf</code>è¿™ä¸ªæ˜¯è®¾ç½®é…ç½®æ–‡ä»¶</p><p><code>redis-server /etc/redis/redis.conf</code>è¿™ä¸ªæ˜¯è®¾ç½®åŠ è½½çš„é…ä»¶æ–‡ä»¶</p><h2 id="ESçš„éƒ¨ç½²æ–¹æ³•">ESçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-8">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-7">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–é•œåƒ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull docker.elastic.co/elasticsearch/elasticsearch:<span class="number">7</span>.<span class="number">15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦éƒ¨ç½²kibanaå®¹å™¨ï¼Œå› æ­¤éœ€è¦è®©eså’Œkibanaå®¹å™¨äº’è”ã€‚è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ªç½‘ç»œï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create es-<span class="built_in">net</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæŒ‚è½½ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/config</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/data</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/plugins</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/elasticsearch/logs</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">--name elasticsearch \</span><br><span class="line">-p 9200:9200 -p 9300:9300 \</span><br><span class="line">-e &quot;discovery.type=single-node&quot; \</span><br><span class="line">-e ES_JAVA_OPTS=&quot;-Xms512m -Xmx512m&quot; \</span><br><span class="line">-d docker.elastic.co/elasticsearch/elasticsearch:7.15.2</span><br></pre></td></tr></table></figure><p>å¤åˆ¶æ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker cp elasticsearch:<span class="regexp">/usr/</span>share<span class="regexp">/elasticsearch/</span>config <span class="regexp">/mydata/</span>elasticsearch</span><br><span class="line">docker cp elasticsearch:<span class="regexp">/usr/</span>share<span class="regexp">/elasticsearch/</span>data <span class="regexp">/mydata/</span>elasticsearch</span><br><span class="line">docker cp elasticsearch:<span class="regexp">/usr/</span>share<span class="regexp">/elasticsearch/</span>plugins <span class="regexp">/mydata/</span>elasticsearch</span><br><span class="line">docker cp elasticsearch:<span class="regexp">/usr/</span>share<span class="regexp">/elasticsearch/</span>logs <span class="regexp">/mydata/</span>elasticsearch</span><br></pre></td></tr></table></figure><p>ç§»é™¤å®¹å™¨</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span> elasticsearch</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²ES">æ­£å¼å¼€å§‹éƒ¨ç½²ES</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">--name elasticsearch \</span><br><span class="line">-p <span class="number">9200</span>:<span class="number">9200</span> -p <span class="number">9300</span>:<span class="number">9300</span> \</span><br><span class="line">-e <span class="string">&quot;discovery.type=single-node&quot;</span> \</span><br><span class="line">-e ES_JAVA_OPTS=<span class="string">&quot;-Xms512m -Xmx512m&quot;</span> \</span><br><span class="line">-e <span class="string">&quot;http.host=0.0.0.0&quot;</span> \</span><br><span class="line">-v <span class="regexp">/mydata/</span>elasticsearch<span class="regexp">/config:/u</span>sr<span class="regexp">/share/</span>elasticsearch/config \</span><br><span class="line">-v <span class="regexp">/mydata/</span>elasticsearch<span class="regexp">/data:/u</span>sr<span class="regexp">/share/</span>elasticsearch/data \</span><br><span class="line">-v <span class="regexp">/mydata/</span>elasticsearch<span class="regexp">/plugins:/u</span>sr<span class="regexp">/share/</span>elasticsearch/plugins \</span><br><span class="line">-v <span class="regexp">/mydata/</span>elasticsearch<span class="regexp">/logs:/u</span>sr<span class="regexp">/share/</span>elasticsearch/logs \</span><br><span class="line">--privileged \</span><br><span class="line">--network es-net \</span><br><span class="line">-d docker.elastic.co<span class="regexp">/elasticsearch/</span>elasticsearch:<span class="number">7.15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p><code>-e &quot;http.host=0.0.0.0&quot;</code>ï¼šç›‘å¬çš„åœ°å€ï¼Œå¯ä»¥å¤–ç½‘è®¿é—®</p><p><code>-e &quot;ES_JAVA_OPTS=-Xms64m -Xmx512m&quot;</code>ï¼šå†…å­˜å¤§å°</p><p><code>-e &quot;discovery.type=single-node&quot;</code>ï¼šéé›†ç¾¤æ¨¡å¼</p><p><code>-v /mydata/elasticsearch/data:/usr/share/elasticsearch/data</code>ï¼šç»‘å®šesçš„æ•°æ®ç›®å½•</p><p><code>-v /mydata/elasticsearch/logs:/usr/share/elasticsearch/logs</code>ï¼šç»‘å®šesçš„æ—¥å¿—ç›®å½•</p><p><code>-v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins</code>ï¼šç»‘å®šesçš„æ’ä»¶ç›®å½•</p><p><code>-v /mydata/elasticsearch/config:/usr/share/elasticsearch/config</code>ï¼šç»‘å®šesçš„é…ç½®ç›®å½•</p><p><code>--privileged</code>ï¼šæˆäºˆé€»è¾‘å·è®¿é—®æƒ</p><p><code>--network es-net</code> ï¼šåŠ å…¥ä¸€ä¸ªåä¸ºes-netçš„ç½‘ç»œä¸­</p><p><code>-p 9200:9200</code>ï¼šç«¯å£æ˜ å°„é…ç½®</p><p><code>è¡¥å……</code>:<strong>9200 æ˜¯ESèŠ‚ç‚¹ä¸å¤–éƒ¨é€šè®¯ä½¿ç”¨çš„ç«¯å£,9300æ˜¯ESèŠ‚ç‚¹ä¹‹é—´é€šè®¯ä½¿ç”¨çš„ç«¯å£</strong></p><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<a target="_blank" rel="noopener" href="http://ip:9200">http://ip:9200</a> å³å¯çœ‹åˆ°elasticsearchçš„å“åº”ç»“æœï¼š</p><h3 id="æ‰©å±•-2">æ‰©å±•</h3><h4 id="å®‰è£…IKåˆ†è¯å™¨">å®‰è£…IKåˆ†è¯å™¨</h4><p><a href="elasticsearch-analysis-ik-7.15.2.zip">elasticsearch-analysis-ik-7.15.2.zip</a></p><p><a target="_blank" rel="noopener" href="https://github.com/infinilabs/analysis-ik/releases?page=7">Releases Â· infinilabs/analysis-ik (github.com)</a></p><p>æŠŠæ–‡ä»¶è§£å‹å‡ºæ¥,å‘½åä¸º<code>ik</code>,ä¹‹åæ”¾åœ¨<code>es</code>çš„<code>plugins</code>ç›®å½•,è¿è¡Œ<code>docker restart elasticsearch</code>é‡å¯<code>es</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="assets/image-20240228231355602.png" alt="image-20240228231355602"></p><h2 id="Kibanaçš„éƒ¨ç½²æ–¹æ³•">Kibanaçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-9">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-8">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–é•œåƒ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull docker.elastic.co/kibana/kibana:<span class="number">7</span>.<span class="number">15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦éƒ¨ç½²eså®¹å™¨ï¼Œå› æ­¤éœ€è¦è®©eså’Œkibanaå®¹å™¨äº’è”ã€‚è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ªç½‘ç»œï¼š(å¦‚æœå·²ç»åˆ›å»ºäº†,åˆ™å¿½ç•¥è¿™ä¸€æ­¥)</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create es-<span class="built_in">net</span></span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Kibana">æ­£å¼å¼€å§‹éƒ¨ç½²Kibana</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -d \</span><br><span class="line">--name kibana \</span><br><span class="line">-e <span class="attribute">ELASTICSEARCH_HOSTS</span>=http://elasticsearch:9200 \</span><br><span class="line"><span class="attribute">--network</span>=es-net \</span><br><span class="line">-p 5601:5601  \</span><br><span class="line">docker.elastic.co/kibana/kibana:7.15.2</span><br></pre></td></tr></table></figure><p><code>--network es-net</code> ï¼šåŠ å…¥ä¸€ä¸ªåä¸ºes-netçš„ç½‘ç»œä¸­ï¼Œä¸elasticsearchåœ¨åŒä¸€ä¸ªç½‘ç»œä¸­</p><p><code>-e ELASTICSEARCH_HOSTS=http://elasticsearch:9200&quot;</code>ï¼šè®¾ç½®elasticsearchçš„åœ°å€ï¼Œå› ä¸ºkibanaå·²ç»ä¸elasticsearchåœ¨ä¸€ä¸ªç½‘ç»œï¼Œå› æ­¤å¯ä»¥ç”¨å®¹å™¨åç›´æ¥è®¿é—®elasticsearch</p><p><code>-p 5601:5601</code>ï¼šç«¯å£æ˜ å°„é…ç½®</p><p>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://ip:5601">http://ip:5601</a>ï¼Œå³å¯çœ‹åˆ°ç»“æœ</p><h2 id="Logstashçš„éƒ¨ç½²æ–¹æ³•">Logstashçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-10">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-9">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–é•œåƒ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull docker.elastic.co/logstash/logstash:<span class="number">7</span>.<span class="number">15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ˜ å°„ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mydata/logstash/config</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/logstash/pipeline</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/logstash/data</span><br></pre></td></tr></table></figure><p>åˆ›å»ºlogstash</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> run --name logstash -d docker.elastic.co/logstash/logstash:<span class="number">7</span>.<span class="number">15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p>å¤åˆ¶æ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp logstash:<span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>config<span class="regexp">/ /my</span>data<span class="regexp">/logstash/</span></span><br><span class="line">docker cp logstash:<span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>data<span class="regexp">/ /my</span>data<span class="regexp">/logstash/</span></span><br><span class="line">docker cp logstash:<span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>pipeline<span class="regexp">/ /my</span>data<span class="regexp">/logstash/</span></span><br></pre></td></tr></table></figure><p>æ›´æ”¹dataæ–‡ä»¶å¤¹çš„æƒé™(è¿™ä¸€æ­¥éå¸¸çš„é‡è¦,ä¸ç„¶åé¢å¯åŠ¨logstashæ—¶ä¼šæç¤ºæ²¡æœ‰å†™å…¥æƒé™)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> -R 777 /mydata/logstash/data</span><br></pre></td></tr></table></figure><p>ç§»é™¤å®¹å™¨</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span> logstash</span><br></pre></td></tr></table></figure><p>é…ç½®ç›¸å…³çš„æ–‡ä»¶</p><p>é¦–å…ˆè¿›å…¥configæ–‡ä»¶å¤¹é‡Œé¢</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="assets/image-20240301145113360.png" alt="image-20240301145113360"></p><p>æ‰“å¼€<code>logstash.yml</code>æ–‡ä»¶,é…ç½®ä¸º</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http<span class="selector-class">.host</span>: <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line">xpack<span class="selector-class">.monitoring</span><span class="selector-class">.elasticsearch</span><span class="selector-class">.hosts</span>: <span class="selector-attr">[ <span class="string">&quot;http://192.168.190.129:9200&quot;</span> ]</span></span><br><span class="line"><span class="selector-tag">path</span><span class="selector-class">.config</span>: /usr/share/logstash/config<span class="comment">/*.conf</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€<code>logstash-sample.conf</code>æ–‡ä»¶,é…ç½®ä¸º(è¿™ä¸ªç­‰ä¸‹ç”¨æ¥æµ‹è¯•)</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sample Logstash configuration for creating a simple</span></span><br><span class="line"><span class="comment"># Beats -&gt; Logstash -&gt; Elasticsearch pipeline.</span></span><br><span class="line"></span><br><span class="line">input &#123;</span><br><span class="line">	<span class="built_in">stdin</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">	<span class="built_in">stdout</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Logstash">æ­£å¼å¼€å§‹éƒ¨ç½²Logstash</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name logstash \</span><br><span class="line">-v <span class="regexp">/mydata/</span>logstash<span class="regexp">/config:/u</span>sr<span class="regexp">/share/</span>logstash/config \</span><br><span class="line">-v <span class="regexp">/mydata/</span>logstash<span class="regexp">/data:/u</span>sr<span class="regexp">/share/</span>logstash/data \</span><br><span class="line">-v <span class="regexp">/mydata/</span>logstash<span class="regexp">/pipeline:/u</span>sr<span class="regexp">/share/</span>logstash/pipeline \</span><br><span class="line">--restart always \</span><br><span class="line">-d docker.elastic.co<span class="regexp">/logstash/</span>logstash:<span class="number">7.15</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p>è¿›è¡Œæµ‹è¯•,è¾“å…¥<code>docker container attach logstash</code>ç„¶åéšä¾¿è¾“å…¥å†…å®¹,çœ‹çœ‹æ˜¯å¦æœ‰å“åº”,å¦‚æœæœ‰å“åº”åˆ™æˆåŠŸ</p><h3 id="æ‰©å±•-3">æ‰©å±•</h3><h4 id="åŒæ­¥Mysqlçš„æ•°æ®åˆ°ESä¸­">åŒæ­¥Mysqlçš„æ•°æ®åˆ°ESä¸­</h4><p>åœ¨/mydata/logstash/configä¸­åˆ›å»ºæ–‡ä»¶<code>jdbc.conf</code>,å†™å…¥å†…å®¹</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">input&#123;</span><br><span class="line">     jdbc&#123;</span><br><span class="line">          <span class="comment"># è¿æ¥æ•°æ®åº“</span></span><br><span class="line">          jdbc_connection_string =&gt; <span class="string">&quot;jdbc:mysql://192.168.190.129:3306/oj_question?characterEncoding=utf8&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&quot;</span></span><br><span class="line">          jdbc_user =&gt; <span class="string">&quot;root&quot;</span></span><br><span class="line">          jdbc_password =&gt; <span class="string">&quot;123456789&quot;</span></span><br><span class="line">          <span class="comment"># è¿æ¥æ•°æ®åº“çš„é©±åŠ¨åŒ…</span></span><br><span class="line">          jdbc_driver_library =&gt; <span class="string">&quot;/usr/share/logstash/config/jars/mysql-connector-java-8.0.30.jar&quot;</span></span><br><span class="line">          jdbc_driver_class =&gt; <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span><br><span class="line">          jdbc_paging_enabled =&gt; <span class="string">&quot;true&quot;</span></span><br><span class="line">          jdbc_page_size =&gt; <span class="string">&quot;5000&quot;</span></span><br><span class="line">          codec =&gt; plain &#123; charset =&gt; <span class="string">&quot;UTF-8&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment"># è®¾ç½®æ—¶åŒº</span></span><br><span class="line">		  jdbc_default_timezone =&gt;<span class="string">&quot;Asia/Shanghai&quot;</span></span><br><span class="line">          <span class="comment"># sql æ–‡ä»¶åœ°å€</span></span><br><span class="line">          <span class="comment"># statement_filepath =&gt; &quot;&quot;</span></span><br><span class="line">          <span class="comment"># sql</span></span><br><span class="line">          statement =&gt; <span class="string">&quot;SELECT id,title,difficulty,tags,user_id,update_time from question where update_time &gt; :sql_last_value and update_time &lt; now() order by update_time desc&quot;</span></span><br><span class="line">          <span class="comment"># è¿™æ˜¯æ§åˆ¶å®šæ—¶çš„ï¼Œé‡å¤æ‰§è¡Œå¯¼å…¥ä»»åŠ¡çš„æ—¶é—´é—´éš”ï¼Œç¬¬ä¸€ä½æ˜¯ç§’</span></span><br><span class="line">          schedule =&gt; <span class="string">&quot;*/5 * * * * *&quot;</span></span><br><span class="line">		  <span class="comment"># æ•°æ®è¿½è¸ª</span></span><br><span class="line">          <span class="comment"># è¿½è¸ªçš„å­—æ®µ</span></span><br><span class="line">          tracking_column =&gt; <span class="string">&quot;update_time&quot;</span></span><br><span class="line">		  use_column_value =&gt; <span class="literal">true</span></span><br><span class="line">		  tracking_column_type =&gt; <span class="string">&quot;timestamp&quot;</span></span><br><span class="line">		  lowercase_column_names =&gt; <span class="literal">false</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¹å­—æ®µè¿›è¡Œå¤„ç†</span></span><br><span class="line">filter &#123;</span><br><span class="line">    mutate &#123;</span><br><span class="line">		remove_field =&gt; [<span class="string">&quot;update_time&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output&#123;</span><br><span class="line">      elasticsearch&#123;</span><br><span class="line">                   <span class="comment"># è¦å¯¼å…¥åˆ°çš„Elasticsearchæ‰€åœ¨çš„ä¸»æœº</span></span><br><span class="line">                   hosts =&gt; <span class="string">&quot;192.168.190.129:9200&quot;</span></span><br><span class="line">                   <span class="comment"># è¦å¯¼å…¥åˆ°çš„Elasticsearchçš„ç´¢å¼•çš„åç§°</span></span><br><span class="line">                   index =&gt; <span class="string">&quot;question&quot;</span></span><br><span class="line">                   <span class="comment"># ç±»å‹åç§°ï¼ˆç±»ä¼¼æ•°æ®åº“è¡¨åï¼‰</span></span><br><span class="line">                   <span class="comment">#document_type =&gt; &quot;merchanteso&quot;</span></span><br><span class="line">                   <span class="comment"># ä¸»é”®åç§°ï¼ˆ%&#123;id&#125;å¯ä»¥å–æˆ‘ä»¬ä¸Šé¢æŸ¥è¯¢åˆ°çš„å€¼ï¼‰</span></span><br><span class="line">                   document_id =&gt; <span class="string">&quot;%&#123;id&#125;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      stdout&#123;</span><br><span class="line">            <span class="comment"># JSON æ ¼å¼è¾“å‡º</span></span><br><span class="line">            codec =&gt; json_lines</span><br><span class="line">      &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¹‹åä¸Šä¼ å¯¹åº”çš„mysqlçš„é©±åŠ¨åŒ…(è¿™ä¸€æ­¥éå¸¸çš„é‡è¦)</strong></p><p>åœ¨/mydata/logstash/configåˆ›å»ºç›®å½•<code>jar</code>,ä¹‹åæŠŠå¯¹åº”çš„é©±åŠ¨æŠŠä¸Šä¼ ä¸Šæ¥å°±è¡Œäº†</p><h2 id="Canalçš„éƒ¨ç½²æ–¹æ³•">Canalçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-11">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-10">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–è¿›è¡Œ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull canal/canal-server:v1.<span class="number">1</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> run -p <span class="number">11111</span>:<span class="number">11111</span> --name canal -d canal/canal-server:v1.<span class="number">1</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mydata/canal</span><br></pre></td></tr></table></figure><p>æ‹·è´æ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp canal:<span class="regexp">/home/</span>admin<span class="regexp">/canal-server/</span>conf  <span class="regexp">/mydata/</span>canal</span><br></pre></td></tr></table></figure><p>ç§»é™¤å®¹å™¨</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span> canal</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘é…ç½®æ–‡ä»¶<code>/mydata/canal/conf/example/instance.properties</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿™ä¸ªåªè¦ä¸å’ŒMysqlçš„å†²çªå°±è¡Œ</span></span><br><span class="line"><span class="attr">canal.instance.mysql.slaveId</span>=<span class="number">11111</span></span><br><span class="line"><span class="comment">#é…ç½®MysqlæœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line"><span class="attr">canal.instance.master.address</span>=<span class="number">192.168</span>.<span class="number">190.129</span>:<span class="number">3306</span></span><br><span class="line"><span class="comment">#ç™»å½•mysqlçš„è´¦å·å’Œå¯†ç </span></span><br><span class="line"><span class="attr">canal.instance.dbUsername</span>=root</span><br><span class="line"><span class="attr">canal.instance.dbPassword</span>=<span class="number">123456789</span></span><br><span class="line"><span class="comment">#è¿™ä¸ªæ˜¯å®˜æ–¹çš„å€¼,è¡¨ç¤ºåŒ¹é…å…¨éƒ¨åº“</span></span><br><span class="line"><span class="attr">canal.instance.filter.regex</span>=.\*\\\\..\*</span><br><span class="line"><span class="comment">#ç›®çš„åœ°,å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="attr">canal.mq.topic</span>=example</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Canal">æ­£å¼å¼€å§‹éƒ¨ç½²Canal</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 11111:11111 \</span><br><span class="line">--name canal \</span><br><span class="line">-v /mydata/canal/conf/example/instance.properties:/home/admin/canal-server/conf/example/instance.properties -d canal/canal-server:v1.1.5</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•-4">æ‰©å±•</h3><h4 id="ç›‘å¬Mysqlçš„binlog">ç›‘å¬Mysqlçš„binlog</h4><p>æŸ¥çœ‹æ˜¯å¦å·²ç»å¼€å¯binlog</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show <span class="keyword">variables</span> like <span class="comment">&#x27;log_bin&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ºOFFåˆ™éœ€è¦å¼€å¯binlog</p><p>ä¿®æ”¹MySqlçš„<code>my.cof</code>æ–‡ä»¶</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># server_idä¸é‡å¤å³å¯ï¼Œä¸è¦å’Œcanalçš„slaveIdé‡å¤</span></span><br><span class="line"><span class="attr">server_id</span>=<span class="number">1</span></span><br><span class="line"><span class="comment"># å¼€å¯binlog</span></span><br><span class="line"><span class="attr">log_bin</span> = mysql-bin</span><br><span class="line"><span class="comment"># é€‰æ‹©rowæ¨¡å¼</span></span><br><span class="line"><span class="attr">binlog_format</span> = ROW</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·(ç›®å‰ä½¿ç”¨è¿™ä¸ªç”¨æˆ·ä¼šæœ‰BUG,æœªæ‰¾åˆ°åŸå› ,å»ºè®®ä½¿ç”¨rootç”¨æˆ·)</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ–°å»ºç”¨æˆ· ç”¨æˆ·åï¼šcanal  å¯†ç ï¼šcanal </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> canal IDENTIFIED <span class="keyword">by</span> <span class="string">&#x27;canal&#x27;</span>;</span><br><span class="line"># æˆæƒ</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">REPLICATION</span> SLAVE, <span class="keyword">REPLICATION</span> CLIENT <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">&#x27;canal&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"># åˆ·æ–°MySQLçš„ç³»ç»Ÿæƒé™ç›¸å…³è¡¨</span><br><span class="line">FLUSH <span class="keyword">PRIVILEGES</span>;</span><br></pre></td></tr></table></figure><h2 id="Nginxçš„éƒ¨ç½²æ–¹æ³•">Nginxçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-12">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-11">å‰ç½®å·¥ä½œ</h4><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx:1.25.3</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæŒ‚è½½ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mydata/nginx/html</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/nginx/logs</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/nginx/conf</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -p <span class="number">80</span>:<span class="number">80</span> \</span><br><span class="line"><span class="comment">--name nginx \</span></span><br><span class="line">-d nginx:<span class="number">1.25</span><span class="number">.3</span></span><br></pre></td></tr></table></figure><p>å¤åˆ¶æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">cp</span> nginx:/usr/share/nginx/html /mydata/nginx</span><br><span class="line">docker <span class="built_in">cp</span> nginx:/var/log/nginx /mydata/nginx/logs</span><br><span class="line">docker <span class="built_in">cp</span> nginx:/etc/nginx /mydata/nginx/conf</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼å¼€å§‹éƒ¨ç½²Nginx">æ­£å¼å¼€å§‹éƒ¨ç½²Nginx</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -p <span class="number">80</span>:<span class="number">80</span> -p <span class="number">443</span>:<span class="number">443</span> \</span><br><span class="line">--name nginx \</span><br><span class="line">-v <span class="regexp">/mydata/</span>nginx<span class="regexp">/html:/u</span>sr<span class="regexp">/share/</span>nginx/html \</span><br><span class="line">-v <span class="regexp">/mydata/</span>nginx<span class="regexp">/logs/</span>nginx:<span class="regexp">/var/</span>log/nginx \</span><br><span class="line">-v <span class="regexp">/mydata/</span>nginx<span class="regexp">/conf/</span>nginx:<span class="regexp">/etc/</span>nginx \</span><br><span class="line">-d nginx:<span class="number">1.25</span>.<span class="number">3</span></span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://ip:80">http://ip:80</a>ï¼Œå³å¯çœ‹åˆ°ç»“æœ</p><h2 id="PaddleOCRçš„éƒ¨ç½²æ–¹æ³•">PaddleOCRçš„éƒ¨ç½²æ–¹æ³•</h2><p>è¿™ä¸ªç›´æ¥éƒ¨ç½²å°±è¡Œ</p><p><a target="_blank" rel="noopener" href="https://gitee.com/duolabmeng666/paddlehub_ppocr">paddlehub_ppocr: æˆ‘ä»¬æŠŠ PaddleOCR æœåŠ¡æ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼Œä»¥ä¾¿åœ¨ Docker æˆ– k8s ç¯å¢ƒé‡Œï¼Œå¿«é€Ÿå‘å¸ƒåˆ°çº¿ä¸Šä½¿ç”¨ (gitee.com)</a></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é˜¿é‡Œäº‘çš„é•œåƒä»“åº“åœ°å€ æœåŠ¡å™¨ç«¯æ¨¡å‹</span></span><br><span class="line"><span class="attribute">docker</span> run -itd --name ppocr -p <span class="number">9000</span>:<span class="number">9000</span> registry.cn-hongkong.aliyuncs.com/llapi/ppocr:<span class="number">1</span>.<span class="number">6</span>.server /bin/bash -c <span class="string">&quot;sh /PaddleOCR/start.sh&quot;</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹æ³•</strong>:ä»¥å‘é€<code>POST</code>è¯·æ±‚ç»™http://192.168.190.132:9000/predict/ocr_system,æºå¸¦æ•°æ®ä¸ºJSONå½¢å¼</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;images&quot;</span>:[<span class="string">&quot;è¿™é‡Œä¸ºbase64å›¾ç‰‡æ•°æ®&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="RabbitMQçš„éƒ¨ç½²æ–¹æ³•">RabbitMQçš„éƒ¨ç½²æ–¹æ³•</h2><p>æ²¡ä»€ä¹ˆå¥½é…ç½®çš„<a target="_blank" rel="noopener" href="https://www.rabbitmq.com/download.html">Downloading and Installing RabbitMQ â€” RabbitMQ</a></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -d \</span><br><span class="line">--name rabbitmq \</span><br><span class="line">-p 5672:5672 -p 15672:15672 \</span><br><span class="line">-e <span class="attribute">RABBITMQ_DEFAULT_USER</span>=user \</span><br><span class="line">-e <span class="attribute">RABBITMQ_DEFAULT_PASS</span>=password \</span><br><span class="line"><span class="attribute">--restart</span>=always \</span><br><span class="line">rabbitmq:3.12-management</span><br></pre></td></tr></table></figure><p><code>-e RABBITMQ_DEFAULT_USER=user</code>è®¾ç½®ç”¨æˆ·å</p><p><code>-e RABBITMQ_DEFAULT_PASS=password</code>è®¾ç½®å¯†ç </p><p>ä¸Šé¢è¿›è¡Œæ˜ å°„çš„ä¸¤ä¸ªç«¯å£,15672æ˜¯æ§åˆ¶å°çš„ç«¯å£,è®¿é—®<strong>ip:15672</strong>è¿›å…¥æ§åˆ¶å°</p><h2 id="RocketMQçš„éƒ¨ç½²æ–¹æ³•"><strong>RocketMQçš„éƒ¨ç½²æ–¹æ³•</strong></h2><h3 id="æ™®é€šéƒ¨ç½²-13">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-12">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºæŒ‚è½½ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºæŒ‚è½½ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/rocketmq/namesrv;</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/rocketmq/broker/conf;</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/rocketmq/broker/lib;</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/rocketmq/console/data;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæŒ‚è½½çš„é…ç½®æ–‡ä»¶<code>vim /mydata/rocketmq/broker/conf/broker.conf</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#æ‰€å±é›†ç¾¤åå­—</span></span><br><span class="line"><span class="attr">brokerClusterName</span>=DefaultCluster</span><br><span class="line"></span><br><span class="line"><span class="comment">#brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·ï¼Œå¦‚æœåœ¨broker-a.propertiesä½¿ç”¨:broker-a,</span></span><br><span class="line"><span class="comment">#åœ¨broker-b.propertiesä½¿ç”¨:broker-b</span></span><br><span class="line"><span class="attr">brokerName</span>=broker-a</span><br><span class="line"></span><br><span class="line"><span class="comment">#0 è¡¨ç¤ºMasterï¼Œ&gt;0 è¡¨ç¤ºSlave</span></span><br><span class="line"><span class="attr">brokerId</span>=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="comment">#namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=rocketmq-namesrv:<span class="number">9876</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨IP,å¦‚æœ docker æŠ¥ com.alibaba.rocketmq.remoting.exception.RemotingConnectException: connect to &lt;192.168.0.120:10909&gt; failed</span></span><br><span class="line"><span class="comment"># è§£å†³æ–¹å¼1 åŠ ä¸Šä¸€å¥producer.setVipChannelEnabled(false);ï¼Œè§£å†³æ–¹å¼2 brokerIP1 è®¾ç½®å®¿ä¸»æœºIPï¼Œä¸è¦ä½¿ç”¨docker å†…éƒ¨IP</span></span><br><span class="line"><span class="attr">brokerIP1</span>=<span class="number">10.0</span>.<span class="number">12.13</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°</span></span><br><span class="line"><span class="attr">defaultTopicQueueNums</span>=<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­ ï¼ï¼ï¼è¿™é‡Œä»”ç»†çœ‹æ˜¯falseï¼Œfalseï¼Œfalse</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="number">10911</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ­¤å‚æ•°æ§åˆ¶æ˜¯å¦å¼€å¯å¯†ç ,ä¸å¼€å¯å¯è®¾ç½®false</span></span><br><span class="line"><span class="attr">aclEnable</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æ–‡ä»¶æ—¶é—´ç‚¹ï¼Œé»˜è®¤å‡Œæ™¨4ç‚¹</span></span><br><span class="line"><span class="attr">deleteWhen</span>=<span class="number">04</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼Œé»˜è®¤48å°æ—¶</span></span><br><span class="line"><span class="attr">fileReservedTime</span>=<span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#commitLogæ¯ä¸ªæ–‡ä»¶çš„å¤§å°é»˜è®¤1G</span></span><br><span class="line"><span class="attr">mapedFileSizeCommitLog</span>=<span class="number">1073741824</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ConsumeQueueæ¯ä¸ªæ–‡ä»¶é»˜è®¤å­˜30Wæ¡ï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µè°ƒæ•´</span></span><br><span class="line"><span class="attr">mapedFileSizeConsumeQueue</span>=<span class="number">300000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="comment">#redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="comment">#æ£€æµ‹ç‰©ç†æ–‡ä»¶ç£ç›˜ç©ºé—´</span></span><br><span class="line"><span class="attr">diskMaxUsedSpaceRatio</span>=<span class="number">88</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="comment">#storePathRootDir=/home/ztztdata/rocketmq-all-4.1.0-incubating/store</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="comment">#storePathCommitLog=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨</span></span><br><span class="line"><span class="comment">#storePathConsumeQueue=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="comment">#storePathIndex=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="comment">#storeCheckpoint=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="comment">#abortFile=/home/ztztdata/rocketmq-all-4.1.0-incubating/store/abort</span></span><br><span class="line"><span class="comment">#é™åˆ¶çš„æ¶ˆæ¯å¤§å°</span></span><br><span class="line"><span class="attr">maxMessageSize</span>=<span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="comment">#flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="comment">#flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="comment">#flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Broker çš„è§’è‰²</span></span><br><span class="line"><span class="comment">#- ASYNC_MASTER å¼‚æ­¥å¤åˆ¶Master</span></span><br><span class="line"><span class="comment">#- SYNC_MASTER åŒæ­¥åŒå†™Master</span></span><br><span class="line"><span class="comment">#- SLAVE</span></span><br><span class="line"><span class="attr">brokerRole</span>=ASYNC_MASTER</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ·ç›˜æ–¹å¼</span></span><br><span class="line"><span class="comment">#- ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜</span></span><br><span class="line"><span class="comment">#- SYNC_FLUSH åŒæ­¥åˆ·ç›˜</span></span><br><span class="line"><span class="attr">flushDiskType</span>=ASYNC_FLUSH</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‘æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span><br><span class="line"><span class="comment">#sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="comment">#æ‹‰æ¶ˆæ¯çº¿ç¨‹æ± æ•°é‡</span></span><br><span class="line"><span class="comment">#pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><p><code>brokerIP1=10.0.12.13</code>å¡«ä¸Šè‡ªå·±æœåŠ¡å™¨å…¬ç½‘ipï¼Œå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯è¦è”è¿™ä¸ª</p><p>å¦‚æœæœ‰è®¾ç½®å¯†ç çš„éœ€æ±‚ï¼Œå…ˆç»™broker.confå¼€å¯aclå¯†ç é…ç½® true\</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="assets/image-20240209001708081.png" alt="image-20240209001708081"></p><p>åˆ›å»ºaclæ–‡ä»¶ï¼Œç”¨äºå¼€å¯ç”¨æˆ·åå¯†ç <code>vim /mydata/rocketmq/broker/conf/plain_acl.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment"># contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment"># this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment"># (the &quot;License&quot;); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment"># the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">#  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">#  limitations under the License.</span></span><br><span class="line"><span class="attr">globalWhiteRemoteAddresses:</span></span><br><span class="line"><span class="comment">#  - 47.100.93.*</span></span><br><span class="line"><span class="comment">#  - 156.254.120.*</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">accounts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">accessKey:</span> <span class="string">RocketMQ</span></span><br><span class="line">    <span class="attr">secretKey:</span> <span class="number">12345678</span></span><br><span class="line">    <span class="attr">whiteRemoteAddress:</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">defaultTopicPerm:</span> <span class="string">DENY</span></span><br><span class="line">    <span class="attr">defaultGroupPerm:</span> <span class="string">SUB</span></span><br><span class="line">    <span class="attr">topicPerms:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">topicA=DENY</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">topicB=PUB|SUB</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">topicC=SUB</span></span><br><span class="line">    <span class="attr">groupPerms:</span></span><br><span class="line">      <span class="comment"># the group should convert to retry topic</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">groupA=DENY</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">groupB=PUB|SUB</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">groupC=SUB</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">accessKey:</span> <span class="string">mallchat</span></span><br><span class="line">    <span class="attr">secretKey:</span> <span class="number">12345678</span></span><br><span class="line">    <span class="attr">whiteRemoteAddress:</span> </span><br><span class="line">    <span class="comment"># if it is admin, it could access all resources</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å¯†ç ä¸èƒ½å°äº6ä½æ•°ï¼Œè¡€çš„æ•™è®­</p><p>åç§°ä¹Ÿä¸èƒ½å°äº6ä½ï¼Œè¡€çš„æ•™è®­ï¼ï¼ï¼</p><p>æƒé™çš„æè¿°å¯å‚è€ƒ<a target="_blank" rel="noopener" href="https://github.com/apache/rocketmq/blob/master/docs/cn/acl/user_guide.md">é“¾æ¥</a></p><p><strong>ç»™consoleåŠ ä¸Šè´¦å·å¯†ç </strong></p><p><code>vim /mydata/rocketmq/console/data/users.properties</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file supports hot change, any change will be auto-reloaded without Console restarting.</span></span><br><span class="line"><span class="comment"># Format: a user per line, username=password[,N] #N is optional, 0 (Normal User); 1 (Admin)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define Admin</span></span><br><span class="line"><span class="comment"># =============ç”¨æˆ·åå’Œå¯†ç è§„åˆ™ã€Œç”¨æˆ·å=å¯†ç ,æƒé™ã€ï¼Œè¿™é‡Œçš„æƒé™ä¸º1è¡¨ç¤ºç®¡ç†å‘˜&gt;ï¼Œä¸º0è¡¨ç¤ºæ™®é€šç”¨æˆ·=============</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šadmin=admin123,1</span></span><br><span class="line"><span class="attribute">mallchat</span>=<span class="number">123456</span>,<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define Users</span></span><br><span class="line"><span class="comment"># =============å±è”½ä¸‹è¾¹ä¸¤ä¸ªè´¦æˆ·=============</span></span><br><span class="line"><span class="comment">#user1=user1</span></span><br><span class="line"><span class="comment">#user2=user2</span></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºymlæ–‡ä»¶</strong><code>vim /mydata/rocketmq/docker-compose.yml</code>,å¡«å…¥é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.5&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">rocketmq-namesrv:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">foxiswho/rocketmq:4.8.0</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rocketmq-namesrv</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9876</span><span class="string">:9876</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./namesrv/logs:/home/rocketmq/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./namesrv/store:/home/rocketmq/store</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPT_EXT:</span> <span class="string">&quot;-Duser.home=/home/rocketmq -Xms128M -Xmx128M -Xmn128m&quot;</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;mqnamesrv&quot;</span>]</span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">rocketmq_net:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">rocketmq-namesrv</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">rocketmq-broker:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">foxiswho/rocketmq:4.8.0</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rocketmq-broker</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">10909</span><span class="string">:10909</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">10911</span><span class="string">:10911</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./broker/logs:/home/rocketmq/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./broker/store:/home/rocketmq/store</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./broker/conf/plain_acl.yml:/home/rocketmq/rocketmq-4.8.0/conf/plain_acl.yml</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./broker/conf/broker.conf:/etc/rocketmq/broker.conf</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPT_EXT:</span> <span class="string">&quot;-Duser.home=/home/rocketmq -Xms128m -Xmx128m -Xmn128m&quot;</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;mqbroker&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;/etc/rocketmq/broker.conf&quot;</span>]</span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rocketmq-namesrv</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">rocketmq_net:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">rocketmq-broker</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">rocketmq-console:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">iamverygood/rocketmq-console:4.7.1</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rocketmq-console</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8180</span><span class="string">:8080</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./console/data:/tmp/rocketmq-console/data</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">JAVA_OPTS:</span> <span class="string">&quot;-Drocketmq.namesrv.addr=rocketmq-namesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false -Drocketmq.config.loginRequired=true -Drocketmq.config.aclEnabled=true -Drocketmq.config.accessKey=mallchat -Drocketmq.config.secretKey=12345678&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">rocketmq-namesrv</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">rocketmq_net:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">rocketmq-console</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">rocketmq_net:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">rocketmq_net</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„aclå¯†ç æ”¹äº†ï¼Œè®°å¾—æŠŠymlçš„consoleå¸å·å¯†ç ä¹Ÿä¸€åŒæ›´æ”¹</p><p><code>-Drocketmq.config.accessKey=mallchat -Drocketmq.config.secretKey=12345678</code></p><p>æˆäºˆç›®å½•æƒé™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç›®å½•æƒé™ï¼š</span></span><br><span class="line">chmod -R <span class="number">777</span> <span class="regexp">/mydata/</span>rocketmq<span class="regexp">/namesrv/</span>;</span><br><span class="line">chmod -R <span class="number">777</span> <span class="regexp">/mydata/</span>rocketmq<span class="regexp">/broker/</span>;</span><br><span class="line">chmod -R <span class="number">777</span> <span class="regexp">/mydata/</span>rocketmq<span class="regexp">/console/</span>;</span><br></pre></td></tr></table></figure><p><strong>è®°å¾—é˜²ç«å¢™å¼€ç«¯å£å· 9876,10911,8180 !!!</strong></p><h4 id="æ­£å¼éƒ¨ç½²">æ­£å¼éƒ¨ç½²</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /mydata/rocketmq</span><br><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>docker psï¼Œå¯ä»¥çœ‹è§ä¸€ç›´åœ¨é‡å¯ä¸­</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="assets/image-20240209002038933.png" alt="image-20240209002038933"></p><p>æ³¨æ„ï¼Œç¬¬ä¸€æ¬¡ä¼šå¯åŠ¨ä¸æˆåŠŸï¼Œå› ä¸ºbrokeréœ€è¦åˆ›å»ºä¸€å †æ–‡ä»¶ï¼Œæ²¡æœ‰æƒé™ã€‚å†æ‰§è¡Œä¸€éæƒé™å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç›®å½•æƒé™ï¼š</span></span><br><span class="line">chmod -R 777 /mydata/rocketmq/namesrv/;</span><br><span class="line">chmod -R 777 /mydata/rocketmq/broker/;</span><br><span class="line">chmod -R 777 /mydata/rocketmq/console/;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç„¶åå¼ºåˆ¶é‡æ–°æ„å»º</span></span><br><span class="line">docker compose up --force-recreate -d</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åå¯ä»¥ç™»å½•æ§åˆ¶å°ï¼Œè®°å¾—å¼€é˜²ç«å¢™ï¼ï¼ï¼</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip:8180/</span><br></pre></td></tr></table></figure><p>è¾“å…¥å¸å·å¯†ç  mallchat 123456</p><h2 id="Koishiçš„éƒ¨ç½²æ–¹æ³•">Koishiçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-14">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-13">å‰ç½®å·¥ä½œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/koishi</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-2">æ­£å¼éƒ¨ç½²</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  --restart=always \</span><br><span class="line">  -d \</span><br><span class="line">  -p 5140:5140 \</span><br><span class="line">  -v /mydata/koishi:/koishi \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  --name=koishi \</span><br><span class="line">  koishijs/koishi:latest-lite</span><br></pre></td></tr></table></figure><h2 id="V2RayAçš„éƒ¨ç½²æ–¹æ³•">V2RayAçš„éƒ¨ç½²æ–¹æ³•</h2><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„,ç›´æ¥éƒ¨ç½²å°±è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ç»å¯¹è·¯å¾„è¿è¡Œ Docker å®¹å™¨</span></span><br><span class="line">docker run -d \</span><br><span class="line">  --restart=always \</span><br><span class="line">  --privileged \</span><br><span class="line">  --network=host \</span><br><span class="line">  --name v2raya \</span><br><span class="line">  -e V2RAYA_LOG_FILE=/tmp/v2raya.log \</span><br><span class="line">  -e V2RAYA_V2RAY_BIN=/usr/local/bin/v2ray \</span><br><span class="line">  -e V2RAYA_NFTABLES_SUPPORT=off \</span><br><span class="line">  -e IPTABLES_MODE=legacy \</span><br><span class="line">  mzz2017/v2raya</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²å®Œæˆå,è®¿é—®http://ip:2017,è®°å¾—æ‰“å¼€2017ç«¯å£</p><h2 id="Zookeeperçš„éƒ¨ç½²æ–¹æ³•">Zookeeperçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-15">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-14">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/zookeeper/data # æ•°æ®æŒ‚è½½ç›®å½•</span><br><span class="line">mkdir -p /mydata/zookeeper/conf # é…ç½®æŒ‚è½½ç›®å½•</span><br><span class="line">mkdir -p /mydata/zookeeper/logs # æ—¥å¿—æŒ‚è½½ç›®å½•</span><br></pre></td></tr></table></figure><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull zookeeper:3.5.7</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶<code>vim /mydata//zookeeper/conf/zoo.cfg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/data  # ä¿å­˜zookeeperä¸­çš„æ•°æ®</span><br><span class="line">clientPort=2181 # å®¢æˆ·ç«¯è¿æ¥ç«¯å£ï¼Œé€šå¸¸ä¸åšä¿®æ”¹</span><br><span class="line">dataLogDir=/datalog</span><br><span class="line">tickTime=2000  # é€šä¿¡å¿ƒè·³æ—¶é—´</span><br><span class="line">initLimit=5    # LF(leader - follower)åˆå§‹é€šä¿¡æ—¶é™</span><br><span class="line">syncLimit=2    # LF åŒæ­¥é€šä¿¡æ—¶é™</span><br><span class="line">autopurge.snapRetainCount=3</span><br><span class="line">autopurge.purgeInterval=0</span><br><span class="line">maxClientCnxns=60</span><br><span class="line">standaloneEnabled=true</span><br><span class="line">admin.enableServer=true</span><br><span class="line">server.1=localhost:2888:3888;2181</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-3">æ­£å¼éƒ¨ç½²</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">--name zookeeper \</span><br><span class="line">--privileged=true \</span><br><span class="line">-p 2181:2181  \</span><br><span class="line">-v /mydata/zookeeper/data:/data \</span><br><span class="line">-v /mydata/zookeeper/conf:/conf \</span><br><span class="line">-v /mydata/zookeeper/logs:/datalog zookeeper:3.5.7</span><br></pre></td></tr></table></figure><h2 id="Etcdçš„éƒ¨ç½²æ–¹æ³•">Etcdçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-16">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-15">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/etcd/data</span><br></pre></td></tr></table></figure><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull quay.io/coreos/etcd:v3.5.7</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-4">æ­£å¼éƒ¨ç½²</h4><p>è®°å¾—æ”¹ip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name etcd \</span><br><span class="line">  --restart always \</span><br><span class="line">  -p 2379:2379 \</span><br><span class="line">  -p 2380:2380 \</span><br><span class="line">  -v /mydata/etcd/data:/etcd-data \</span><br><span class="line">  -v /etc/localtime:/etc/localtime:ro \</span><br><span class="line">  -e ETCDCTL_API=3 \</span><br><span class="line">  -e ETCD_LOGGER=zap \</span><br><span class="line">  -e ETCD_DATA_DIR=/etcd-data \</span><br><span class="line">  -e ETCD_NAME=node1 \</span><br><span class="line">  -e INITIAL_CLUSTER_TOKEN=etcd-v3-cluster \</span><br><span class="line">  -e ETCD_ADVERTISE_CLIENT_URLS=http://192.168.1.100:2379 \</span><br><span class="line">  -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379 \</span><br><span class="line">  -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://0.0.0.0:2380 \</span><br><span class="line">  -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 \</span><br><span class="line">  -e ETCD_INITIAL_CLUSTER=node1=http://0.0.0.0:2380 \</span><br><span class="line">  -e ETCD_INITIAL_CLUSTER_STATE=new \</span><br><span class="line">  -e ETCD_AUTO_COMPACTION_RETENTION=1 \</span><br><span class="line">  quay.io/coreos/etcd:v3.5.7 /usr/local/bin/etcd</span><br></pre></td></tr></table></figure><h3 id="docker-composeéƒ¨ç½²-3">docker-composeéƒ¨ç½²</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">etcd:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">quay.io/coreos/etcd:v3.5.4</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">etcd</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">/usr/local/bin/etcd</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">deng</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2379:2379&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2380:2380&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/mydata/etcd/data:/etcd-data&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment"># æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line">      <span class="attr">ETCDCTL_API:</span> <span class="number">3</span></span><br><span class="line">      <span class="comment"># æ—¥å¿—ç±»å‹</span></span><br><span class="line">      <span class="attr">ETCD_LOGGER:</span> <span class="string">zap</span></span><br><span class="line">      <span class="comment"># å­˜å‚¨è·¯å¾„</span></span><br><span class="line">      <span class="attr">ETCD_DATA_DIR:</span> <span class="string">/etcd-data</span></span><br><span class="line">  </span><br><span class="line">      <span class="comment"># èŠ‚ç‚¹åç§°</span></span><br><span class="line">      <span class="attr">ETCD_NAME:</span> <span class="string">node1</span></span><br><span class="line">      <span class="comment"># åˆ›å»ºé›†ç¾¤å”¯ä¸€TOKEN</span></span><br><span class="line">      <span class="attr">INITIAL_CLUSTER_TOKEN:</span> <span class="string">etcd-v3-cluster</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment"># å¯¹å¤–å…¬å‘Šè¯¥èŠ‚ç‚¹å®¢æˆ·ç«¯ç›‘å¬åœ°å€</span></span><br><span class="line">      <span class="attr">ETCD_ADVERTISE_CLIENT_URLS:</span> <span class="string">http://192.168.1.100:2379</span></span><br><span class="line">      <span class="comment"># æœ¬åœ°å¯¹å¤–æä¾›æœåŠ¡çš„åœ°å€</span></span><br><span class="line">      <span class="attr">ETCD_LISTEN_CLIENT_URLS:</span> <span class="string">http://0.0.0.0:2379</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment"># è¯¥èŠ‚ç‚¹åŒä¼´ç›‘å¬åœ°å€</span></span><br><span class="line">      <span class="attr">ETCD_INITIAL_ADVERTISE_PEER_URLS:</span> <span class="string">http://0.0.0.0:2380</span></span><br><span class="line">      <span class="comment"># å’Œå…¶ä»–èŠ‚ç‚¹é€šä¿¡çš„åœ°å€</span></span><br><span class="line">      <span class="attr">ETCD_LISTEN_PEER_URLS:</span> <span class="string">http://0.0.0.0:2380</span></span><br><span class="line">  </span><br><span class="line">      <span class="comment"># åˆå§‹åŒ–é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹åˆ—è¡¨ï¼ˆé€—å·éš”å¼€ï¼‰</span></span><br><span class="line">      <span class="attr">ETCD_INITIAL_CLUSTER:</span> <span class="string">node1=http://0.0.0.0:2380</span></span><br><span class="line">      <span class="comment"># é›†ç¾¤åˆå§‹åŒ–çŠ¶æ€ï¼ˆæ–°å»ºé›†ç¾¤æ—¶ä¸ºnewï¼‰</span></span><br><span class="line">      <span class="attr">ETCD_INITIAL_CLUSTER_STATE:</span> <span class="string">new</span></span><br><span class="line">      <span class="comment"># å¯ç”¨K-Vé”®å€¼è‡ªåŠ¨å‹ç¼©å­˜ç›˜</span></span><br><span class="line">      <span class="attr">ETCD_AUTO_COMPACTION_RETENTION:</span> <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">deng:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="Lagrangeçš„éƒ¨ç½²æ–¹æ³•">Lagrangeçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-17">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-16">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/lagrange</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-5">æ­£å¼éƒ¨ç½²</h4><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -td -p 8081:8081 --name lagrange -v mydata/lagrange/data:/app/data -e UID=$UID -e GID=$(id -g) ghcr.io/lagrangedev/lagrange.onebot:edge</span><br></pre></td></tr></table></figure><p>å¤åˆ¶é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp lagrange:/app/data /mydata/lagrange</span><br></pre></td></tr></table></figure><h2 id="Napcatçš„éƒ¨ç½²æ–¹æ³•">Napcatçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-18">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-17">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/napcat/config</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-6">æ­£å¼éƒ¨ç½²</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">-e ACCOUNT=3371973473 \</span><br><span class="line">-e WS_ENABLE=true \</span><br><span class="line">-p 3001:3001 \</span><br><span class="line">-p 6099:6099 \</span><br><span class="line">--name napcat \</span><br><span class="line">-v /mydata/napcat/config:/usr/src/app/napcat/config \</span><br><span class="line">--restart=always \</span><br><span class="line">mlikiowa/napcat-docker:latest</span><br></pre></td></tr></table></figure><h2 id="Koishiçš„éƒ¨ç½²æ–¹æ³•-2">Koishiçš„éƒ¨ç½²æ–¹æ³•</h2><h3 id="æ™®é€šéƒ¨ç½²-19">æ™®é€šéƒ¨ç½²</h3><h4 id="å‰ç½®å·¥ä½œ-18">å‰ç½®å·¥ä½œ</h4><p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mydata/koishi</span><br></pre></td></tr></table></figure><h4 id="æ­£å¼éƒ¨ç½²-7">æ­£å¼éƒ¨ç½²</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-d \</span><br><span class="line">--name koishi \</span><br><span class="line">-p 5140:5140 \</span><br><span class="line">-e TZ=Asia/Shanghai \</span><br><span class="line">-v /mydata/koishi:/koishi \</span><br><span class="line">koishijs/koishi</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.wikunkun.asia/posts/6e4eaf21.html">https://www.wikunkun.asia/posts/6e4eaf21.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>Lambda</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2024-11-26</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2024-11-23</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>æ•™ç¨‹</a><a class="post-meta__tags" href="/tags/Linux/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>Linux</a><a class="post-meta__tags" href="/tags/Docker/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>Docker</a></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/ebcd8e7e.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-jxgmjy.jpg" onerror='onerror=null,src="/assets/r2.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">MarkDownä¸­çš„æ•°å­¦ç¬¦å·</div></div></a></div><div class="next-post pull-right"><a href="/posts/2013454d.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-5gx3r3.jpg" onerror='onerror=null,src="/assets/r2.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/29c15ce3.html" title="å®‰è£…Docker"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/942ccf45ac6cd3a90025dacad855ce71e430960ea96341cbd.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-12-19</div><div class="title">å®‰è£…Docker</div></div></a></div><div><a href="/posts/25452eac.html" title="å®‰è£…Linuxè™šæ‹Ÿæœº"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-vqk7rm.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-12-19</div><div class="title">å®‰è£…Linuxè™šæ‹Ÿæœº</div></div></a></div><div><a href="/posts/20241127.html" title="Ubuntuä¸Šå®‰è£…V2rayA"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-p96odm.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-12-19</div><div class="title">Ubuntuä¸Šå®‰è£…V2rayA</div></div></a></div><div><a href="/posts/a1ff416d.html" title="æ­å»ºQQæœºå™¨äºº"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-zywwky.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-12-19</div><div class="title">æ­å»ºQQæœºå™¨äºº</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:700">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySql%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">MySqlçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2MySql"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²MySql</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-compose%E9%83%A8%E7%BD%B2"><span class="toc-text">docker-composeéƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SqlServer%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">SqlServerçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-2"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-compose%E9%83%A8%E7%BD%B2-2"><span class="toc-text">docker-composeéƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MinIO%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">MinIOçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-3"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-2"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nacos2-X%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Nacos2.Xçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-4"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-3"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Nacos"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Nacos</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nacos1-X%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Nacos1.Xçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-5"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-4"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Nacos-2"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Nacos</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XXL-JOB%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">XXL-JOBçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-6"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-5"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2XXL-JOB"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²XXL-JOB</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95"><span class="toc-text">æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">ä½¿ç”¨æ–¹æ³•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Redisçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-7"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-6"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Redis"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Redis</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">ESçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-8"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-7"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2ES"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²ES</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-2"><span class="toc-text">æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85IK%E5%88%86%E8%AF%8D%E5%99%A8"><span class="toc-text">å®‰è£…IKåˆ†è¯å™¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kibana%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Kibanaçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-9"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-8"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Kibana"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Kibana</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Logstash%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Logstashçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-10"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-9"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Logstash"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Logstash</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-3"><span class="toc-text">æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5Mysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%B0ES%E4%B8%AD"><span class="toc-text">åŒæ­¥Mysqlçš„æ•°æ®åˆ°ESä¸­</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Canal%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Canalçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-11"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-10"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Canal"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Canal</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-4"><span class="toc-text">æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%ACMysql%E7%9A%84binlog"><span class="toc-text">ç›‘å¬Mysqlçš„binlog</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Nginxçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-12"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-11"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2Nginx"><span class="toc-text">æ­£å¼å¼€å§‹éƒ¨ç½²Nginx</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PaddleOCR%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">PaddleOCRçš„éƒ¨ç½²æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RabbitMQ%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">RabbitMQçš„éƒ¨ç½²æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RocketMQ%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">RocketMQçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-13"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-12"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Koishi%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Koishiçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-14"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-13"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-2"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#V2RayA%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">V2RayAçš„éƒ¨ç½²æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Zookeeper%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Zookeeperçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-15"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-14"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-3"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Etcd%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Etcdçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-16"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-15"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-4"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-compose%E9%83%A8%E7%BD%B2-3"><span class="toc-text">docker-composeéƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lagrange%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Lagrangeçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-17"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-16"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-5"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Napcat%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95"><span class="toc-text">Napcatçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-18"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-17"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-6"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Koishi%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E6%B3%95-2"><span class="toc-text">Koishiçš„éƒ¨ç½²æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E9%83%A8%E7%BD%B2-19"><span class="toc-text">æ™®é€šéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C-18"><span class="toc-text">å‰ç½®å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2-7"><span class="toc-text">æ­£å¼éƒ¨ç½²</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color:transparent"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸŒˆ</p><div class="bg-ad"><div>ä¸è®ºä½ åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹,é‡è¦çš„æ˜¯å¼€å§‹ä¹‹åä¸è¦åœæ­¢;æ— è®ºä½ åœ¨ä»€ä¹ˆæ—¶é—´ç»“æŸ,é‡è¦çš„æ˜¯ç»“æŸä¹‹åå°±ä¸è¦åæ‚”</div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/site/echarts/">æ–‡ç« ç»Ÿè®¡</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾ğŸ¤</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="Fomalhaut"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/img/avatar.webp" alt=""></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.eurkon.com/" title="Eurkon"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/eurkon-cdn/hexo/images/user/avatar.jpg" alt=""></a></div></div></div></div><div class="copyright"><span><b>&copy;2024</b></span><span><b>&nbsp;&nbsp;By Lambda</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/Frame-Hexo-blue.svg" alt=""></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/Theme-Butterfly-6513df.svg" alt=""></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://lambda-image-1.pages.dev/Source-Github-d021d6.svg" alt=""></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-music"><a class="rightMenu-item" href="javascript:anzhiyu.musicSkipBack();"><i class="fa fa-step-backward"></i><span>ä¸Šä¸€é¦–</span></a><a class="rightMenu-item" href="javascript:anzhiyu.musicToggle();"><i class="fa fa-play"></i><span>æš‚åœ/æ’­æ”¾</span></a><a class="rightMenu-item" href="javascript:anzhiyu.musicSkipForward();"><i class="fa fa-step-forward"></i><span>ä¸‹ä¸€é¦–</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading()),setTimeout((function(){preloader.endLoading()}),5e3),document.getElementById("loading-box").addEventListener("click",(()=>{preloader.endLoading()}))</script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.2},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""],insertScript:[200,()=>{document.querySelectorAll("mjx-container:not([display])").forEach((t=>{const e=t.parentNode;"li"===e.nodeName.toLowerCase()?e.parentNode.classList.add("has-jax"):e.classList.add("has-jax")}))},"",!1]}}};const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://lambda-twikoo.netlify.app",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn.jsdelivr.net/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="//at.alicdn.com/t/c/font_4760581_ystn3ruh4p.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script src="https://cdn.jsdelivr.net/npm/winbox"></script><script defer src="/js/lambda.js"></script><script id="click-show-text" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-show-text.min.js" data-mobile="false" data-text="ğŸ¡ ç»“åºåœ¨äººå¢ƒ,ğŸŒ¾ è€Œæ— è½¦é©¬å–§,ğŸŒ± é‡‡èŠä¸œç¯±ä¸‹,ğŸ æ‚ ç„¶è§å—å±±" data-fontsize="15px" data-random="false" async></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="contact-info"><div class="option"><i class="fas fa-rocket"></i><div class="bloktop"></div><div class="text button"><button class="btn" type="button" onclick="randomPost()">éšä¾¿é€›é€›</button><div class="strip"></div></div></div><div class="option"><i class="fas fa-music"></i><div class="blokbottom"></div><div class="text aplayertext"><div class="music-hover" id="nav-music-hoverTips"><meting-js class="no-destroy" id="12893290734" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-theme)" data-lrctype="0" order="random"></meting-js></div><div class="strip"></div></div></div></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"===location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://www.wikunkun.asia/categories/åç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ å°Lã®åç«¯ç¬”è®° (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://www.wikunkun.asia/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';console.log("å·²æŒ‚è½½magnet"),parent.insertAdjacentHTML("afterbegin",child)}</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#e9e9e9;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><script data-pjax>function butterfly_swiper_injector_config(){var a=document.getElementById("recent-posts");console.log("å·²æŒ‚è½½butterfly_swiper"),a.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/ebcd8e7e.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-jxgmjy.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-12-18</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/ebcd8e7e.html&quot;);" href="javascript:void(0);" alt="">MarkDownä¸­çš„æ•°å­¦ç¬¦å·</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/ebcd8e7e.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/20241127.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-p96odm.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-12-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/20241127.html&quot;);" href="javascript:void(0);" alt="">Ubuntuä¸Šå®‰è£…V2rayA</a><div class="blog-slider__text">æœ¬æ–‡è®°å½•äº†åšä¸»ç›®å‰ç”¨Dockeréƒ¨ç½²è¿‡çš„å…¨éƒ¨å†…å®¹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/20241127.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/6e4eaf21.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-d6r2qo.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/6e4eaf21.html&quot;);" href="javascript:void(0);" alt="">Dockerå¸¸ç”¨å·¥å…·çš„å®‰è£…æ–¹æ³•</a><div class="blog-slider__text">æœ¬æ–‡è®°å½•äº†åšä¸»ç›®å‰ç”¨Dockeréƒ¨ç½²è¿‡çš„å…¨éƒ¨å†…å®¹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/6e4eaf21.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lambda-image-1.pages.dev/wallhaven-5gx3r3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</a><div class="blog-slider__text">ğŸ¥§æœ¬æ–‡æ±‡æ€»Markdownæ ¼å¼ä»¥åŠå¤–æŒ‚æ ‡ç­¾åœ¨ç½‘é¡µç«¯çš„æ¸²æŸ“æ•ˆæœï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="/",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>function gitcalendar_injector_config(){document.getElementById("gitZone").insertAdjacentHTML("afterbegin",'<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>'),console.log("å·²æŒ‚è½½gitcalendar")}document.getElementById("gitZone")&&"/site/census/"===location.pathname&&(gitcalendar_injector_config(),GitCalendarInit("/api?null",["#d9e0df","#c6e0dc","#a8dcd4","#9adcd2","#89ded1","#77e0d0","#5fdecb","#47dcc6","#39dcc3","#1fdabe","#00dab9"],"null"))</script></body></html>